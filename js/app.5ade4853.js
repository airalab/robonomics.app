(function(){var e={21209:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var a=n(56768);function o(e,t,n,o,r,s){const i=(0,a.g2)("robo-select"),l=(0,a.g2)("robo-status"),u=(0,a.g2)("robo-loader"),c=(0,a.g2)("robo-text");return(0,a.uX)(),(0,a.CE)(a.FK,null,[o.twins&&o.twins.length>0?((0,a.uX)(),(0,a.Wv)(i,{key:0,options:o.twins,values:o.twins,modelValue:o.twinId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.twinId=e),size:"small",label:"Choose digital twin",block:""},null,8,["options","values","modelValue"])):void 0===o.twins||o.isLoading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:1,type:"warning"},{default:(0,a.k6)(()=>[...t[1]||(t[1]=[(0,a.eW)(" Digital twins do not exist ",-1)])]),_:1})),o.isLoading?((0,a.uX)(),(0,a.Wv)(c,{key:2,weight:"normal-italic",align:"center"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{size:"1.5"}),t[2]||(t[2]=(0,a.eW)(" Loading ",-1))]),_:1})):(0,a.Q3)("",!0)],64)}var r=n(58891),s=n(67441),i=n(90144),l={emits:["change"],setup(e,{emit:t}){const{account:n}=(0,r.F7)(),{loading:o,data:l}=(0,s.$q)(n),u=(0,i.KR)();return(0,a.wB)(l,e=>{void 0===u.value&&e&&e.length>0&&(u.value=e[e.length-1])},{immediate:!0}),(0,a.wB)(u,e=>{t("change",e)}),{twins:l,twinId:u,isLoading:o}}},u=n(71241);const c=(0,u.A)(l,[["render",o]]);var d=c},47790:function(){},58580:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var a=n(56768);function o(e,t,n,o,r,s){const i=(0,a.g2)("robo-button");return(0,a.uX)(),(0,a.Wv)(i,{onClick:o.create,block:"",disabled:o.isProccess,loading:o.isProccess,type:o.isSuccess?"ok":"primary"},{default:(0,a.k6)(()=>[...t[0]||(t[0]=[(0,a.eW)(" Create new ",-1)])]),_:1},8,["onClick","disabled","loading","type"])}var r=n(58891),s=n(67441),i=n(90144),l={props:["owner"],emits:["change"],setup(e,{emit:t}){const n=(0,s.y3)(),{tx:a}=(0,r.qT)(),o=(0,i.KR)(!1),l=(0,i.KR)(!1);return{isProccess:o,isSuccess:l,create:async()=>{if(l.value=!1,o.value=!0,await a.send(()=>n.create(),{subscription:e.owner}),a.error.value)return"Cancelled"!==a.error.value?console.log(a.error.value):console.log("cancel"),o.value=!1,!1;o.value=!1,l.value=!0,t("create")}}}},u=n(71241);const c=(0,u.A)(l,[["render",o]]);var d=c},70495:function(){},71281:function(){},78636:function(e,t,n){"use strict";n.d(t,{$o:function(){return s},XV:function(){return r}});var a=n(38174),o=n(51547);function r(e){const t=Buffer.from(e.slice(2),"hex"),n=18,r=(0,o.vt)(n,t),s=a.TO.createV0(r);return s.toString()}function s(e){return"0x"+Buffer.from(a.TO.parse(e).multihash.digest).toString("hex")}},82169:function(e,t,n){"use strict";n.d(t,{h:function(){return a}}),t.A={default_rpc_endpoint:"wss://polkadot.rpc.robonomics.network/",nft_oracle_endpoint:"https://nft-oracle.robonomics.network/"};const a={xrt:"0x9516AFb2b538CAbDcC04e2289E9d48eEBD8fa6ef",tokenVesting:"0xf1ba89053f407DF832b135F19fDB064C7A97E1F3",nft:"0x0c0C092f372c3Cb49D116A14fA7dcc40e84275aa"}},96370:function(e,t,n){"use strict";var a=n(90712),o=n(80661),r=n(45130),s=n(56768);function i(e,t,n,a,o,r){const i=(0,s.g2)("router-view"),l=(0,s.g2)("main-layout");return(0,s.uX)(),(0,s.Wv)(l,{pagetitle:a.title},{default:(0,s.k6)(()=>[(0,s.bF)(i)]),_:1},8,["pagetitle"])}var l=n(90144),u=n(24232),c=n(60782);const d={class:"footer-section"},p=["data-label"],v=["href"],m=["href"];var y={__name:"Footer",setup(e){const t=(0,c.Pj)(),n=(0,s.EW)(()=>t.state.robonomicsUIvue?.polkadot?.connection?.network||"polkadot"),a=[{title:"Services",links:[{title:"Sensors map",link:"https://sensors.social"}]},{title:"Tokenomics",links:[{title:"About XRT",link:"https://robonomics.network/xrt/"},{title:"Uniswap",link:"https://app.uniswap.org/#/swap?inputCurrency=0x7de91b204c1c737bcee6f000aaa6569cf7061cb7&outputCurrency=0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"},{title:"Basilisk",link:"https://app.basilisk.cloud/pools-and-farms"}]},{title:"Tools",links:[{title:"Substrate Portal",link:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2F"+n.value+".rpc.robonomics.network%2F#/explorer"},{title:"Subscan",link:"https://robonomics.subscan.io/"},{title:"Polkassembly",link:"https://robonomics.polkassembly.io/"}]},{title:"Help",links:[{title:"GitHub",link:"https://github.com/airalab/robonomics.app"},{title:"Wiki",link:"https://wiki.robonomics.network/"},{title:"Academy",link:"https://robonomics.academy/"},{title:"Contacts",link:"https://robonomics.network/contact/"},{title:"Issues",link:"https://github.com/airalab/robonomics.app/issues"}]}],o=(0,l.KR)(null);return(0,s.sV)(async()=>{try{const e=await fetch("https://api.github.com/repos/airalab/robonomics.app/releases/latest"),t=await e.json();o.value=t}catch(e){o.value="Ошибка загрузки",console.error("Ошибка получения версии:",e)}}),(e,t)=>{const n=(0,s.g2)("robo-grid"),r=(0,s.g2)("robo-text");return(0,s.uX)(),(0,s.CE)("footer",null,[(0,s.Lk)("div",d,[(0,s.Lk)("nav",null,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(a,e=>(0,s.Lk)("ul",{key:e.title,"data-label":e.title},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.links,e=>((0,s.uX)(),(0,s.CE)("li",{key:e.title},[(0,s.Lk)("a",{href:e.link,target:"_blank"},(0,u.v_)(e.title),9,v)]))),128))],8,p)),64))]),(0,s.bF)(r,{size:"small",weight:"bold",align:"center"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{id:"footer-label",type:"flex",gap:"x05",valign:"center"},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.Lk)("span",null,"Secured by",-1),(0,s.Lk)("img",{width:"100",alt:"Polkadot",src:"/images/polkadot-new-dot-logo-horizontal.svg"},null,-1)])]),_:1})]),_:1})]),o.value?((0,s.uX)(),(0,s.Wv)(r,{key:0,size:"small",weight:"bold",align:"center",class:"footer-section"},{default:(0,s.k6)(()=>[t[1]||(t[1]=(0,s.eW)(" Latest release: ",-1)),(0,s.Lk)("a",{href:o.value.html_url,target:"_blank"},(0,u.v_)(o.value.tag_name)+" "+(0,u.v_)(o.value.name),9,m)]),_:1})):(0,s.Q3)("",!0)])}}},f=n(71241);const h=(0,f.A)(y,[["__scopeId","data-v-21672fb0"]]);var b=h;const g={class:"nav-rws"};function w(e,t,n,a,o,r){const i=(0,s.g2)("router-link"),l=(0,s.g2)("robo-section"),u=(0,s.g2)("robo-layout-header");return a.renderComponent?((0,s.uX)(),(0,s.Wv)(u,{key:0,logoIcon:"images/icon_white.svg",title:n.title},{nav:(0,s.k6)(()=>[(0,s.bF)(l,null,{default:(0,s.k6)(()=>[(0,s.Lk)("nav",g,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.bF)(i,{to:e.$store.state.robonomicsUIvue.rws.links.activate,exact:""},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)(" Buy/renew a subscription ",-1)])]),_:1},8,["to"])]),(0,s.Lk)("li",null,[(0,s.bF)(i,{to:e.$store.state.robonomicsUIvue.rws.links.setupnew,exact:""},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)(" New setup ",-1)])]),_:1},8,["to"])]),(0,s.Lk)("li",null,[(0,s.bF)(i,{to:e.$store.state.robonomicsUIvue.rws.links.setup,exact:""},{default:(0,s.k6)(()=>[t[2]||(t[2]=(0,s.eW)(" Your setup",-1)),e.$store.state.robonomicsUIvue.rws.list.length>1?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.eW)("s ")],64)):(0,s.Q3)("",!0)]),_:1},8,["to"])]),(0,s.Lk)("li",null,[(0,s.bF)(i,{to:e.$store.state.robonomicsUIvue.rws.links.devices,exact:""},{default:(0,s.k6)(()=>[...t[3]||(t[3]=[(0,s.eW)(" Devices & Control ",-1)])]),_:1},8,["to"])])])])]),_:1})]),_:1},8,["title"])):(0,s.Q3)("",!0)}n(18111),n(20116);var k=n(7744),_=n.n(k);function E(e){return new(_())(e.toString())}function C(e,t){return E(e).todp(t)}function T(e,t=0,n){return E(e).div(new(_())(10).pow(t.toString())).todp(n).toString()}function I(){console.log("Build version:","master","v0.9.1","39c4c27")}_().set({toExpNeg:-31,toExpPos:31});var F=n(69134),S=n(58891),R=n(48512),A=n(57282),x=n(46597),O=n(88608),W=n(13588),U=n(38770),N=n(11273),X=n(85360),K=n.n(X),P=n(87470),L=n.n(P);function B(e,t,n,a){return L().box.open(e,t,n,a)||null}function M(e,t,n,a=(0,O.a)(24)){return{nonce:a,sealed:L().box(e,a,n,t)}}function j(e){return K().convertSecretKey(e)}function $(e){return K().convertPublicKey(e)}function D(e,t,n){const a=(0,A.e)(e);return B(a.slice(24,a.length),a.slice(0,24),$((0,A.e)(t)),j(n))}function H(e,t,n,a){const{nonce:o,sealed:r}=M((0,A.e)(e),j(n),$((0,A.e)(t)),a);return(0,x.z)(o,r)}function Q(e){const t=(0,W.F)(e),n=(0,U.r)(t);return n}function V(e){return{pair:e,address:(0,N.j)(e.publicKey,32),encodeAddress:(t=32)=>(0,N.j)(e.publicKey,t),decryptMessage:(t,n)=>D(t,n,e.secretKey),encryptMessage:(t,n,a)=>H(t,n,e.secretKey,a)}}var q=n(82631),G=n(52835),z=n(26631),J=n(81841);const Y=(0,l.KR)([]);function Z(){(async()=>{Y.value=G.Ay.getPairs()})();const{pair:e,setSender:t}=(0,S.F7)(),n=async(e,n=!1,a="sr25519")=>{let o;try{o=G.Ay.getPair(e)}catch(r){G.Ay.loadInjected(e,{},a),Y.value=G.Ay.getPairs(),o=G.Ay.getPair(e)}o&&(n?t(o,{signer:n}):t(o))},a=e=>G.Ay.keyring.addFromPair(e),o=async e=>{const t=a(e);await n(t.address,!1,t.type)},r=(e,t={},n="ed25519")=>G.Ay.keyring.addFromUri(e,t,n),s=async(e,t={},a="ed25519")=>{const o=r(e,t,a);await n(o.address,!1,o.type)},i=t=>(0,z.X)(e.value.sign(t)).toString(),l=(e,t=null)=>{if(!e.meta.isInjected&&"ed25519"===e.type){const n=e.toJson(t),a=(0,q.v)(t,(0,J.u)(n.encoded),n.encoding.type);return V(a)}return!1},u=(t=null)=>l(e.value,t);return{accounts:Y,setSender:n,addFromPair:a,setFromPair:o,addFromUri:r,setFromUri:s,signMsg:i,encryptorFromPair:l,encryptor:u}}var ee={props:{title:{type:String,default:"Robonomics Dapp"}},setup(){const{isConnected:e}=(0,F.Op)(),t=(0,c.Pj)(),n=(0,R.lq)(),{setSender:a}=Z(),{account:o}=(0,S.F7)(),{balance:r}=(0,S.Av)(o);(0,s.wB)(r,()=>{r.value&&t.commit("polkadot/setBalanceXRT",C(T(r.value,9),4))});const i=async o=>{try{if(!e.value)return;if(!t.state.robonomicsUIvue.polkadot.accounts)return;const r=t.state.robonomicsUIvue.polkadot.accounts.find(e=>e.address===o);if(!r)return;"telemetry"!==n.name&&a(o,t.state.robonomicsUIvue.polkadot.extensionObj.signer,r.type)}catch(r){console.error(r)}};(0,s.wB)(()=>t.state.robonomicsUIvue.polkadot.extensionObj,e=>{e.signer&&e.signer.signRaw&&t.state.robonomicsUIvue.polkadot.address&&i(t.state.robonomicsUIvue.polkadot.address)},{immediate:!0,deep:!0}),(0,s.wB)(()=>t.state.robonomicsUIvue.polkadot.address,e=>{e&&t.state.robonomicsUIvue.polkadot.extensionObj.signer&&t.state.robonomicsUIvue.polkadot.extensionObj.signer.signRaw&&i(e)},{immediate:!0}),(0,s.wB)(e,(e,n)=>{e&&!n&&i(t.state.robonomicsUIvue.polkadot.address)},{immediate:!0});const u=(0,l.KR)(!0);return(0,s.wB)(n,async()=>{u.value=!1,await(0,s.dY)(),u.value=!0}),{renderComponent:u}}};const te=(0,f.A)(ee,[["render",w],["__scopeId","data-v-4a43c3f1"]]);var ne=te,ae=n(8847),oe=n(62080),re={__name:"Main",props:{pagetitle:{type:String}},setup(e){const t=e,n=(0,c.Pj)(),a=(0,l.KR)(),{data:o}=(0,oe.Rs)(a,{immediate:!1}),{data:r}=(0,ae.tR)(a,{immediate:!1});return(0,s.wB)(()=>n.state.robonomicsUIvue.rws.active,e=>{a.value=e},{immediate:!0}),(0,s.wB)([a,o],()=>{o.value&&n.commit("rws/setExpiredate",o.value.validUntil)},{immediate:!0}),(0,s.wB)(r,e=>{n.commit("rws/setUsers",e)},{immediate:!0}),(e,n)=>{const a=(0,s.g2)("robo-layout");return(0,s.uX)(),(0,s.Wv)(a,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,l.R1)(ne),{title:t.pagetitle},null,8,["title"]),(0,s.RG)(e.$slots,"default"),(0,s.bF)((0,l.R1)(b))]),_:3})}}};const se=re;var ie=se,le={name:"App",components:{MainLayout:ie},setup(){const{isConnected:e}=(0,F.Op)(),t=(0,c.Pj)(),n=(0,R.rd)(),a=(0,R.lq)(),o=(0,l.KR)();return t.commit("rws/setLink",{link:"activate",value:n.resolve({name:"rwsActivate"}).path}),t.commit("rws/setLink",{link:"setup",value:n.resolve({name:"rwsSetup"}).path}),t.commit("rws/setLink",{link:"setupnew",value:n.resolve({name:"rwsSetupNew"}).path}),t.commit("rws/setLink",{link:"devices",value:n.resolve({name:"telemetry"}).path}),(0,s.wB)(a,()=>{o.value=a?.meta?.title;const e=o.value?`${o.value} / Robonomics Dapp`:"Robonomics Dapp";document.title=e,document.querySelector('meta[property="og:title"]')&&document.querySelector('meta[property="og:title"]').setAttribute("content",e)}),(0,s.wB)([a,e],([e,n])=>{"telemetry"!==e.name&&n&&(t.commit("polkadot/setConnectionType","parachain"),t.commit("polkadot/setConnectionConnected",!0))},{immediate:!0}),{title:o}}};const ue=(0,f.A)(le,[["render",i]]);var ce=ue,de=(n(44114),n(16518));class pe{constructor(e){this.endpoint=e,this.authHeader=null,this.robonomics=null,this._create()}_create(){this.client=(0,de.vt)({...this._options()})}_options(){const e={url:this.endpoint,headers:{}};return this.authHeader&&(e.headers.authorization=`Basic ${this.authHeader}`),this.robonomics&&(e.headers.robonomics=this.robonomics),e}isAuth(){return!!this.authHeader&&!!this.robonomics}auth(e,t,n){const a=`sub-${t}:${n}`;this.authHeader=Buffer.from(a).toString("base64"),this.robonomics=e,this._create()}authClear(){this.authHeader=null,this.robonomics=null,this._create()}async ls(e){const t=[];for await(const n of this.client.ls(e))"file"===n.type&&t.push(n);return t}async cat(e){const t=async e=>{const t=new TextDecoder;let n="";for await(const a of this.client.cat(e))n+=t.decode(a,{stream:!0});return n};return await t(e)}async add(e){return await this.client.add(e)}}var ve={install:(e,t)=>{const n=(0,l.KR)();e.provide("IpfsProvider",{instance:n}),n.value=new pe(t.api.gateway)}},me=(n(14603),n(47566),n(98721),n(82169)),ye={install:e=>{const t=new URLSearchParams(window.location.search);let n=t.get("rpc");n||(n=localStorage.getItem("rpc-parachain")||me.A.default_rpc_endpoint),localStorage.setItem("rpc-parachain",n),e.use(F.Ay,{start:!0,endpoint:n})}},fe=n(77938),he=n(84207);const be={PROVIDER:4,NETWORK:1,ACCOUNT:2};class ge extends Error{constructor(e=null,...t){super(...t),this.code=e}}class we{async activate(){}async getProvider(){}async getAccount(){}async getNetworkId(){}}class ke extends we{constructor(e,t){super(),this.provider=e,this.name="extension",this.account=null,this.networkId=null,this.emit=t}handleChainChanged(e){this.networkId=Number(e),this.emit("chainChanged",{networkId:this.networkId})}async getProvider(){return this.provider.on("accountsChanged",e=>{this.handleAccountsChanged(e)}),this.provider.on("chainChanged",e=>{this.handleChainChanged(e)}),this.provider}async getNetworkId(){return this.networkId=Number(await this.provider.request({method:"eth_chainId"})),this.networkId}handleAccountsChanged(e){e.length>0?this.account=e[0]:this.account=null,this.emit("accountsChanged",{account:this.account})}}class _e{constructor({networks:e=[]}={}){this.provider=null,this.connector=null,this.signer=null,this.networks=e,this.state=(0,l.Kh)({isReady:!1,error:null,account:null,networkId:null,block:null})}async setConnector(e){"extension"===e.name?this.provider=new fe.k(await e.getProvider()):this.provider=new he.f(await e.getProvider()),this.connector=e,this.setSigner()}async setSigner(){if(this.connector&&"extension"===this.connector.name)try{this.signer=await this.provider.getSigner(),this.state.account=this.signer.address}catch(e){console.log(e)}}on(e,t){"chainChanged"===e&&(this.state.networkId=t.networkId),this.networks.includes(this.state.networkId)?this.state.error=null:this.state.error=new ge(be.NETWORK,`sssPlease, switch to network id ${this.networks}`)}async setProvider(e){try{await this.setConnector(new ke(e,(e,t)=>this.on(e,t)))}catch(t){console.warn(t.message)}try{this.connector&&(this.state.networkId=await this.connector.getNetworkId(),this.networks.includes(this.state.networkId)||(this.state.error=new ge(be.NETWORK,`Please, switch to network id ${this.networks}`)))}catch(t){this.state.error=t}this.provider&&null===this.state.error&&(this.state.isReady=!0,this.provider.on("block",async e=>{this.state.block=await this.provider.getBlock(e)}),this.state.block=await this.provider.getBlock("latest"))}}const Ee=new _e({networks:[11155111]});var Ce={install:async e=>{e.provide("EthereumProvider",{web3:Ee})}},Te={__name:"Altruist",setup(e){return(e,t)=>{const n=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(n,null,{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)(" Altruist ",-1)])]),_:1})}}};const Ie=Te;var Fe=Ie,Se={__name:"Hikikomori",setup(e){return(e,t)=>{const n=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(n,null,{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)(" Hikikomori ",-1)])]),_:1})}}};const Re=Se;var Ae=Re,xe={__name:"Riscv",setup(e){return(e,t)=>{const n=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(n,null,{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)(" Riscv ",-1)])]),_:1})}}};const Oe=xe;var We=Oe;function Ue(e,t,n,a,o,r){const i=(0,s.g2)("nft-token");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",null,"balance: "+(0,u.v_)(a.balance)+" NFT",1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.tokens,e=>((0,s.uX)(),(0,s.Wv)(i,{key:e.tokenId,token:e,onActivate:a.loadTokens,class:"card"},null,8,["token","onActivate"]))),128))])}var Ne=n(94373),Xe=n(5319),Ke=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ERC721EnumerableForbiddenBatchMint","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"ERC721OutOfBoundsIndex","type":"error"},{"inputs":[],"name":"EnforcedPause","type":"error"},{"inputs":[],"name":"ExpectedPause","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"TokenActivated","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_fromTokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_toTokenId","type":"uint256"}],"name":"BatchMetadataUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"MetadataUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"activate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"activatedOf","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"string","name":"uri","type":"string"}],"name":"safeMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}]');const Pe=["src"],Le={key:1};function Be(e,t,n,a,o,r){const i=(0,s.g2)("btn-send"),l=(0,s.g2)("free-minimum");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.eW)((0,u.v_)(n.token.name),1),t[2]||(t[2]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("img",{src:`https://ipfs.io/ipfs/${n.token.image}`,style:{width:"200px"}},null,8,Pe),t[3]||(t[3]=(0,s.Lk)("br",null,null,-1)),n.token.activated?((0,s.uX)(),(0,s.CE)("span",Le,"activated")):((0,s.uX)(),(0,s.Wv)(i,{key:0,onClick:t[0]||(t[0]=e=>a.activate(e,n.token.tokenId))},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)(" Activate ",-1)])]),_:1})),(0,s.bF)(l,{token:n.token.tokenId},null,8,["token"])])}const Me=["disabled"],je={key:0,class:"error"},$e={key:1,class:"success"};function De(e,t,n,a,o,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.send&&a.send(...e)),disabled:a.status===a.STATUS.PRE_PROCESS||a.status===a.STATUS.WAIT_TX},[(0,s.RG)(e.$slots,"default")],8,Me),a.status===a.STATUS.ERROR?((0,s.uX)(),(0,s.CE)("div",je,(0,u.v_)(a.error),1)):(0,s.Q3)("",!0),a.status===a.STATUS.READY?((0,s.uX)(),(0,s.CE)("div",$e,"✓")):(0,s.Q3)("",!0)],64)}const He={NEW:1,PRE_PROCESS:2,WAIT_TX:3,READY:4,ERROR:5};var Qe={emits:["click"],setup(e,{emit:t}){const n=(0,l.KR)(He.NEW),a=(0,l.KR)(null),o=async()=>{n.value=He.PRE_PROCESS,a.value=null,t("click",async(e,t,o=!0)=>{n.value=He.WAIT_TX;try{if(e){const t=await e.wait();console.log(t.hash),o&&(n.value=He.READY)}else t&&("ACTION_REJECTED"!==t.code?(n.value=He.ERROR,a.value=t.code||t):n.value=He.NEW)}catch(r){n.value=He.ERROR,a.value=r.message}})};return{STATUS:He,status:n,error:a,send:o}}};const Ve=(0,f.A)(Qe,[["render",De]]);var qe=Ve;const Ge={key:0},ze={key:1},Je={key:0},Ye=["disabled"],Ze={key:0},et={key:1};function tt(e,t,n,a,o,r){return(0,s.uX)(),(0,s.CE)("div",null,[a.received?((0,s.uX)(),(0,s.CE)("div",Ge,"free minimum received")):((0,s.uX)(),(0,s.CE)("div",ze,[a.address?((0,s.uX)(),(0,s.CE)("div",Je,[(0,s.eW)((0,u.v_)(a.address)+" ",1),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.requestFreeMinimum&&a.requestFreeMinimum(...e)),disabled:!a.avaible||1!==a.status&&4!==a.status}," Get free minimum ",8,Ye),3===a.status?((0,s.uX)(),(0,s.CE)("div",Ze,"request sent")):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,u.v_)(a.error),1)])):((0,s.uX)(),(0,s.CE)("div",et,"Not found parachain account"))]))])}const nt=Ne.A.create({baseURL:`${me.A.nft_oracle_endpoint}api`}),at=async(e,t)=>{try{const n=await nt.post("/check",{nft:e,address:t});return n.data.result?[n.data.result,n.data.error]:[!1,n.data.error]}catch(n){return[!1,n.message]}},ot=async(e,t,n)=>{try{const a=JSON.stringify({nft:e,address:t,for:n}),o=await Ee.signer.signMessage(a),r=await nt.post("/verify",{signature:o,nft:e,address:t,for:n});return r.data.result?[r.data.result,r.data.error]:[!1,r.data.error]}catch(a){return[!1,a.message]}};var rt={props:["token"],setup(e){const t=(0,l.KR)(),n=(0,c.Pj)();(0,s.wB)(()=>n.state.robonomicsUIvue.polkadot.address,e=>{try{t.value=n.state.robonomicsUIvue.polkadot.accounts.find(t=>t.address===e)}catch(a){console.error(a)}},{immediate:!0});const a=(0,s.EW)(()=>t.value?.address),o=(0,l.KR)(),r=(0,l.KR)(!1),i=async()=>{const t=await at(e.token,Ee.state.account);r.value=t[0],o.value=t[1]};i();const u=setInterval(i,1e4),d=(0,s.EW)(()=>!r.value&&"Free minimum for this token has already been received"===o.value);(0,s.wB)(d,e=>{e&&(p.value=1,clearInterval(u))},{immediate:!0});const p=(0,l.KR)(1),v=async()=>{p.value=2;const t=await ot(e.token,Ee.state.account,a.value);t[0]?p.value=3:p.value=4,o.value=t[1]};return{address:a,received:d,avaible:r,error:o,status:p,requestFreeMinimum:v}}};const st=(0,f.A)(rt,[["render",tt]]);var it=st,lt={props:["token"],emits:["activate"],components:{BtnSend:qe,FreeMinimum:it},setup(e,{emit:t}){const n=async(e,n)=>{const a=new Xe.NZ(me.h.nft,Ke,Ee.provider);try{const o=await a.connect(Ee.signer).activate(n);await e(o),t("activate",n)}catch(o){"CALL_EXCEPTION"===o.code&&o.data?await e(null,a.interface.parseError(o.data).name):await e(null,o)}};return{activate:n}}};const ut=(0,f.A)(lt,[["render",Be]]);var ct=ut,dt={components:{NftToken:ct},setup(){const e=(0,l.KR)(null),t=(0,l.KR)([]),n=new Xe.NZ(me.h.nft,Ke,Ee.provider);(async()=>{try{console.log("$web3.state.account",Ee.state.account),e.value=await n.balanceOf(Ee.state.account)}catch(t){console.log(t)}})(),(0,s.wB)(()=>Ee.state.block,async()=>{try{console.log("$web3.state.account",Ee.state.account),e.value=await n.balanceOf(Ee.state.account)}catch(t){console.log(t)}});const a=async()=>{if(!e.value)return;const a=[];for(let t=0;t<e.value;t++)try{const e=await n.tokenOfOwnerByIndex(Ee.state.account,t),o=await n.tokenURI(e),r=o.split("ipfs://").pop(),s=await Ne.A.get(`https://ipfs.io/ipfs/${r}`);a.push({activated:await n.activatedOf(e),tokenId:e.toString(),name:`${s.data.name} #${e.toString()}`,image:s.data.image.split("ipfs://").pop()})}catch(o){console.log(o)}t.value=a};return(0,s.wB)(e,a),{balance:e,tokens:t,loadTokens:a}}};const pt=(0,f.A)(dt,[["render",Ue]]);var vt=pt;const mt={key:0},yt={key:1},ft={key:1},ht={key:2};var bt={__name:"Season-pass-2",setup(e){const t=(0,c.Pj)(),n=[],a=e=>n.push(e.detail);return(0,s.wB)(()=>t.state.robonomicsUIvue.ethereum.activeProviderRdns,async e=>{const t=n.findIndex(t=>t.info.rdns===e);if(t>=0)try{await Ee.setProvider(n[t].provider)}catch(a){console.log(a)}}),(0,s.wB)(()=>t.state.robonomicsUIvue.ethereum.activeAccount,async()=>{await Ee.setSigner()}),window.addEventListener("eip6963:announceProvider",a),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),(0,s.sV)(async()=>{const e=n.findIndex(e=>e.info.rdns===t.state.robonomicsUIvue.ethereum.activeProviderRdns);if(e>=0)try{await Ee.setProvider(n[e].provider)}catch(a){console.log(a)}await Ee.setSigner()}),(e,n)=>{const a=(0,s.g2)("robo-text"),o=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(o,null,{default:(0,s.k6)(()=>[(0,s.bF)(a,{title:"1"},{default:(0,s.k6)(()=>[...n[0]||(n[0]=[(0,s.eW)("Season pass",-1)])]),_:1}),n[1]||(n[1]=(0,s.Lk)("hr",null,null,-1)),(0,s.eW)(" "+(0,u.v_)((0,l.R1)(t).state.robonomicsUIvue.ethereum.activeAccount)+" ",1),n[2]||(n[2]=(0,s.Lk)("hr",null,null,-1)),(0,s.eW)(" "+(0,u.v_)((0,l.R1)(t).state.robonomicsUIvue.ethereum.activeProviderRdns)+" ",1),(0,s.Lk)("div",null,[(0,l.R1)(Ee).state.isReady?((0,s.uX)(),(0,s.CE)("div",mt,[(0,l.R1)(Ee).state.account?((0,s.uX)(),(0,s.Wv)(vt,{key:0})):((0,s.uX)(),(0,s.CE)("div",yt,"Not found account"))])):((0,s.uX)(),(0,s.CE)("div",ft,"...")),(0,l.R1)(Ee).state.error?((0,s.uX)(),(0,s.CE)("div",ht,(0,u.v_)((0,l.R1)(Ee).state.error),1)):(0,s.Q3)("",!0)])]),_:1})}}};const gt=bt;var wt=gt;n(13579);const kt={1:{name:"Ethereum Mainnet"},2:{name:"Expanse Network"},11155111:{name:"Sepolia"}};var _t=kt,Et=n(86438);const Ct={class:"seasonpass-content"},Tt={class:"seasonpass-content-inside"},It={key:0,class:"seasonpass-msg"},Ft=["src"],St={key:0,class:"seasonpass-monkey","aria-hidden":"true"},Rt=11155111;var At={__name:"Season-pass",setup(e){const t=(0,c.Pj)(),n=(0,Et.y)(),a=(0,l.Kh)({providers:n.getProviders()});n.subscribe(e=>{console.log("Providers updated:",e),a.providers=e});const o=(0,s.EW)(()=>t.state.robonomicsUIvue.ethereum.activeAccount),i=(0,s.EW)(()=>a.providers.find(e=>e.info.rdns===t.state.robonomicsUIvue.ethereum.activeProviderRdns)),d=()=>!!i?.value&&(i.value?.provider?._state?.isConnected||i.value?.provider?.isConnected),p=(0,l.KR)(null),v=(0,l.KR)([]);let m,y,f=null;const h=(0,l.KR)("START"),b=(0,l.KR)(1),g=e=>{b.value=e},w=()=>{try{f=new fe.k(i.value.provider)}catch(e){console.log(e)}},k=async(e=!1)=>{if(e||(h.value="",v.value=[],i.value&&d()))try{if(!e){const e=await i.value.provider.request({method:"wallet_getPermissions",params:[{eth_accounts:{}}]});if(!e||!e.some(e=>"eth_accounts"===e.parentCapability))return void(h.value="NO_WALLET_PERMISSION");const t=await i.value.provider.request({method:"eth_requestAccounts",params:[{eth_accounts:{}}]});if(!t||t?.length<1)return void(h.value="NO_ETH_ACCOUNT");const n=await i.value.provider.request({method:"eth_chainId",params:[{eth_accounts:{}}]});if(parseInt(n)!==Rt)return void(h.value="WRONG_ETH_NETWORK");h.value="NFT_STARTED_GETTING",w(),m=await f.getSigner(),y=new Xe.NZ(me.h.nft,Ke,m)}y.balanceOf(m.address).then(async t=>{e&&p.value===parseFloat(t)||(p.value=parseFloat(t),!p.value||p.value<1?h.value="NFT_NOT_FOUND":await _())}).catch(e=>{console.log(e)})}catch(t){h.value="NFT_NOT_FOUND",console.log(t)}else h.value="NO_ETH_EXTENSION"},_=async()=>{const e=[];for(let n=0;n<p.value;n++)try{const t=await y.tokenOfOwnerByIndex(m.address,n),a=await y.tokenURI(t),o=a.split("ipfs://").pop(),r=await fetch(`https://ipfs.io/ipfs/${o}`),s=await r.json();e.push({activated:await y.activatedOf(t),tokenId:t.toString(),name:`${s.name} #${t.toString()}`,image:s.image.split("ipfs://").pop(),status:"INIT"})}catch(t){console.log(t)}v.value=e,v.value?.length>0?h.value="TOKENS_FOUND":h.value="TOKENS_NOT_FOUND"},E=async e=>{let t=0;v.value&&(t=v.value.findIndex(t=>t.tokenId===e));try{v.value[t].status="ACTIVATION_STARTED";const n=await y.connect(m).activate(e);console.log("tx",n),await _(),v.value[t].status="ACTIVATION_ENDED"}catch(n){console.error(n),"ACTION_REJECTED"===n.code?v.value[t].status="ACTIVATION_REJECTED":v.value[t].status="ACTIVATION_NOT_SUCCESSFULL"}};return(0,s.wB)([i,o],async()=>{p.value=null,await k()}),(0,s.sV)(async()=>{await k(),f&&f.on("block",async()=>{await k(!0)})}),(e,t)=>{const n=(0,s.g2)("robo-text"),a=(0,s.g2)("robo-loader"),o=(0,s.g2)("robo-grid"),i=(0,s.g2)("robo-button"),c=(0,s.g2)("robo-section"),d=(0,s.g2)("robo-card"),p=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(p,null,{default:(0,s.k6)(()=>[(0,s.bF)(d,{allowExpand:"",class:"seasonpass"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{title:"3",offset:"x0"},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("Your season pass 2024-2025",-1)])]),_:1}),(0,s.Lk)("div",Ct,[(0,s.Lk)("div",Tt,["START"!==h.value?((0,s.uX)(),(0,s.CE)("div",It,["NO_ETH_EXTENSION"===h.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.eW)("Connect or install Ethereum extension in your browser")],64)):(0,s.Q3)("",!0),"WRONG_ETH_NETWORK"===h.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)("Please, switch to "+(0,u.v_)((0,l.R1)(_t)[Rt].name),1)],64)):(0,s.Q3)("",!0),"NO_WALLET_PERMISSION"===h.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[(0,s.eW)("Please, check permissions in the connected extension")],64)):(0,s.Q3)("",!0),"NO_ETH_ACCOUNT"===h.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:3},[(0,s.eW)("No Ethereum account found: check your extension")],64)):(0,s.Q3)("",!0),"NFT_NOT_FOUND"===h.value||"TOKENS_NOT_FOUND"===h.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:4},[(0,s.eW)("No Season Pass NFT accosiated with this account")],64)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),"NFT_STARTED_GETTING"===h.value?((0,s.uX)(),(0,s.Wv)(a,{key:1,size:"3"})):(0,s.Q3)("",!0),"TOKENS_FOUND"===h.value&&v.value?((0,s.uX)(),(0,s.CE)("div",{key:2,class:(0,u.C4)(["tokens","tokens-show-"+b.value])},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value,e=>((0,s.uX)(),(0,s.CE)("div",{class:"token",key:e.tokenId},[(0,s.Lk)("img",{src:`https://ipfs.io/ipfs/${e?.image}`},null,8,Ft),(0,s.bF)(n,{lines:"dotted",size:"small"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{type:"flex",offset:"x0",gap:"x025",galign:"start",valign:"center"},{default:(0,s.k6)(()=>[(0,s.eW)((0,u.v_)(e?.name),1)]),_:2},1024),(0,s.bF)(o,{type:"flex",offset:"x0",gap:"x025",galign:"start",valign:"center"},{default:(0,s.k6)(()=>[(0,s.eW)((0,u.v_)(e?.tokenId),1)]),_:2},1024),(0,s.bF)(o,{type:"flex",offset:"x0",gap:"x025",galign:"start",valign:"center"},{default:(0,s.k6)(()=>[(0,s.eW)((0,u.v_)(e?.status),1)]),_:2},1024),(0,s.bF)(o,{type:"flex",offset:"x0",gap:"x025",galign:"start",valign:"center"},{default:(0,s.k6)(()=>[e.activated?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.eW)("Activated")],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)("Not activated")],64))]),_:2},1024)]),_:2},1024),(0,s.bF)(c,{offset:"x1"},{default:(0,s.k6)(()=>[e.tokenId&&!e.activated?((0,s.uX)(),(0,s.Wv)(i,{key:0,onClick:(0,r.D$)(t=>E(e.tokenId),["prevent"]),size:"small"},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)("Activate",-1)])]),_:1},8,["onClick"])):(0,s.Q3)("",!0)]),_:2},1024)]))),128))],2)):(0,s.Q3)("",!0),"TOKENS_FOUND"===h.value?((0,s.uX)(),(0,s.CE)("div",{key:3,class:(0,u.C4)(["tokens-switch","tokens-switch-showed-"+b.value])},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value,(e,t)=>((0,s.uX)(),(0,s.Wv)(i,{key:e.tokenId,clean:"",onClick:(0,r.D$)(e=>g(t+1),["prevent"])},{default:(0,s.k6)(()=>[(0,s.eW)((0,u.v_)(t+1),1)]),_:2},1032,["onClick"]))),128))],2)):(0,s.Q3)("",!0)]),"TOKENS_FOUND"!==h.value?((0,s.uX)(),(0,s.CE)("div",St,[...t[2]||(t[2]=[(0,s.Lk)("img",{src:"images/season-pass-24-25-monkey.webp","aria-hidden":"true"},null,-1)])])):(0,s.Q3)("",!0)])]),_:1})]),_:1})}}};const xt=(0,f.A)(At,[["__scopeId","data-v-d54f8394"]]);var Ot=xt;function Wt(e,t,n,a,o,r){const i=(0,s.g2)("robo-rws-setup-active"),l=(0,s.g2)("robo-text"),c=(0,s.g2)("robo-icon"),d=(0,s.g2)("robo-link"),p=(0,s.g2)("robo-grid"),v=(0,s.g2)("robo-details"),m=(0,s.g2)("robo-grid-item"),y=(0,s.g2)("robo-section"),f=(0,s.g2)("robo-button"),h=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(h,{width:"middle-wide"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{minColumnWidth:"200px",gap:"x2"},{default:(0,s.k6)(()=>[(0,s.bF)(y,null,{default:(0,s.k6)(()=>[(0,s.bF)(y,{card:""},{default:(0,s.k6)(()=>[a.rwsactive&&""!==a.rwsactive?((0,s.uX)(),(0,s.Wv)(i,{key:0,show:["name","owner","date","userstext","link"]})):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bF)(l,{title:"4",align:"left"},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("RWS subscription",-1)])]),_:1}),(0,s.bF)(y,{offset:"x1"},{default:(0,s.k6)(()=>[(0,s.bF)(l,{size:"small",weight:"normal-italic"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{gap:"x05",columns:"1"},{default:(0,s.k6)(()=>[(0,s.bF)(m,{borderbottom:""},{default:(0,s.k6)(()=>[t[5]||(t[5]=(0,s.eW)(" Price from: ",-1)),(0,s.Lk)("b",null,"~ "+(0,u.v_)(a.price)+" XRT ",1),(0,s.bF)(v,null,{summary:(0,s.k6)(()=>[(0,s.bF)(c,{icon:"circle-question"})]),default:(0,s.k6)(()=>[(0,s.bF)(p,{gap:"x05"},{default:(0,s.k6)(()=>[(0,s.bF)(l,{weight:"bold"},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)("Where to buy XRT",-1)])]),_:1}),(0,s.bF)(d,{href:"https://app.basilisk.cloud/trade"},{default:(0,s.k6)(()=>[...t[2]||(t[2]=[(0,s.eW)(" Basilisk ",-1)])]),_:1}),(0,s.bF)(d,{href:"https://app.solarbeam.io/exchange/swap"},{default:(0,s.k6)(()=>[...t[3]||(t[3]=[(0,s.eW)(" Solarbeam ",-1)])]),_:1}),(0,s.bF)(d,{href:"https://trade.kraken.com/markets/kraken/xrt/usd"},{default:(0,s.k6)(()=>[...t[4]||(t[4]=[(0,s.eW)(" Kraken ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),(0,s.bF)(m,{borderbottom:""},{default:(0,s.k6)(()=>[...t[6]||(t[6]=[(0,s.eW)(" Activation time ",-1),(0,s.Lk)("b",null,"~ 2 min",-1)])]),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)(()=>[t[7]||(t[7]=(0,s.eW)(" Available subscriptions: ",-1)),(0,s.Lk)("b",null,(0,u.v_)(a.freeAuctions),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,s.bF)(f,{router:a.linkActivate,size:"small",block:""},{default:(0,s.k6)(()=>[(0,s.bF)(c,{icon:"wallet"}),t[8]||(t[8]=(0,s.eW)(" Buy a subscription ",-1))]),_:1},8,["router"])],64))]),_:1})]),_:1}),(0,s.bF)(y,null,{default:(0,s.k6)(()=>[(0,s.bF)(l,{title:"4",align:"left",offset:"x05"},{default:(0,s.k6)(()=>[...t[9]||(t[9]=[(0,s.eW)("Open-source hardware & web3 cloud",-1)])]),_:1}),(0,s.bF)(l,{size:"small",weight:"normal-italic"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{gap:"x05",columns:"1"},{default:(0,s.k6)(()=>[(0,s.bF)(m,{borderbottom:""},{default:(0,s.k6)(()=>[(0,s.bF)(c,{icon:"check"}),t[10]||(t[10]=(0,s.eW)(" Secured data, only you have an access ",-1))]),_:1}),(0,s.bF)(m,{borderbottom:""},{default:(0,s.k6)(()=>[(0,s.bF)(c,{icon:"check"}),t[11]||(t[11]=(0,s.eW)(" Remote control without any corporate clouds ",-1))]),_:1}),(0,s.bF)(m,{borderbottom:""},{default:(0,s.k6)(()=>[(0,s.bF)(c,{icon:"check"}),t[12]||(t[12]=(0,s.eW)(" Brand-independent smart home, combine wanted devices ",-1))]),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)(()=>[(0,s.bF)(c,{icon:"check"}),t[13]||(t[13]=(0,s.eW)(" Update your Robonomics devices as you wish with Type-C ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}var Ut=n(76907),Nt={setup(){const e=(0,l.KR)(0);let t=null;const n=(0,c.Pj)(),a=(0,s.EW)(()=>n.state.robonomicsUIvue.rws.active),o=(0,s.EW)(()=>n.state.robonomicsUIvue.rws.links.activate),{isConnected:r,instance:i}=(0,F.Op)(),{data:u}=(0,oe.Rb)();(0,s.wB)(r,async t=>{if(t){const t=i.api.consts.rws.minimalBid;e.value=t.add((0,Ut.A)(1))}},{immediate:!0}),(0,s.hi)(()=>{t&&t()});const d=(0,s.EW)(()=>r.value?T(e.value,9,0):0);return{rwsactive:a,linkActivate:o,freeAuctions:u,price:d}}};const Xt=(0,f.A)(Nt,[["render",Wt]]);var Kt=Xt,Pt=n.p+"img/icon_XRT.0017568f.png";n(61701);function Lt(e,t,n,a,o,r){const i=(0,s.g2)("robo-select"),l=(0,s.g2)("robo-button"),c=(0,s.g2)("robo-text"),d=(0,s.g2)("robo-section");return(0,s.uX)(),(0,s.Wv)(d,{offset:"x2",width:"narrow"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{offset:"x3"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{block:"",values:a.commands.map(e=>e.value),options:a.commands.map(e=>e.name),modelValue:a.parameter,"onUpdate:modelValue":t[0]||(t[0]=e=>a.parameter=e)},null,8,["values","options","modelValue"]),t[2]||(t[2]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(l,{onClick:a.send,block:"",loading:a.proccess},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)("Pay",-1)])]),_:1},8,["onClick","loading"]),a.result?((0,s.uX)(),(0,s.Wv)(c,{key:0,weight:"bold"},{default:(0,s.k6)(()=>[(0,s.eW)((0,u.v_)(a.result),1)]),_:1})):(0,s.Q3)("",!0),a.error?((0,s.uX)(),(0,s.Wv)(c,{key:1,highlight:"error"},{default:(0,s.k6)(()=>[(0,s.eW)((0,u.v_)(a.error),1)]),_:1})):(0,s.Q3)("",!0)]),_:1})]),_:1})}const Bt=5e8,Mt="4GfZP7fbGZBx5GxR4mreLGTm872vHYhDMmaV6d1SEHGtv7AP",jt=[{name:"Wave Hand",value:"0x3000000000000000000000000000000000000000000000000000000000000000"},{name:"Wave Hand with Turn",value:"0x3100000000000000000000000000000000000000000000000000000000000000"},{name:"Shake Hand",value:"0x3200000000000000000000000000000000000000000000000000000000000000"}];var $t={setup(){const e=(0,s.WQ)("RobonomicsProvider"),t=(0,l.KR)(!1),n=(0,l.KR)(null),a=(0,l.KR)(null),o=(0,l.KR)(jt),r=(0,l.KR)(jt[0].value),i=(0,l.KR)(null),u=async()=>{a.value="",n.value="",t.value=!0;try{const t=[e.instance.value.api.tx.balances.transfer(Mt,Bt),e.instance.value.launch.send(Mt,r.value)],a=e.instance.value.api.tx.utility.batch(t),o=await e.instance.value.accountManager.signAndSend(a);console.log("saved",o),n.value=`${o.blockNumber}-${o.txIndex}`}catch(a){console.log(a),a.value=a.message}t.value=!1};return{proccess:t,result:n,error:a,commands:o,parameter:r,unsubscribe:i,send:u}}};const Dt=(0,f.A)($t,[["render",Lt]]);var Ht=Dt,Qt={__name:"RobonomicsApp",setup(e){const t=(0,s.WQ)("RobonomicsProvider");return(e,n)=>{const a=(0,s.g2)("robo-text"),o=(0,s.g2)("robo-section"),r=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(r,null,{default:(0,s.k6)(()=>[(0,s.bF)(o,{offset:"x2",width:"narrow",style:{"text-align":"center"}},{default:(0,s.k6)(()=>[n[2]||(n[2]=(0,s.Lk)("h2",null,"Pay the robot with cryptocurrency.",-1)),n[3]||(n[3]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(a,null,{default:(0,s.k6)(()=>[...n[0]||(n[0]=[(0,s.eW)(" Experience this unique demo of the future robot economy on the streets of Las Vegas during CES 2025! Pay one Robonomics token ($XRT) to a humanoid for any basic action. ",-1)])]),_:1}),n[4]||(n[4]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(a,{weight:"bold",style:{"font-size":"40px"}},{default:(0,s.k6)(()=>[...n[1]||(n[1]=[(0,s.eW)(" Price: 0.5",-1),(0,s.Lk)("img",{src:Pt,class:"logo"},null,-1)])]),_:1})]),_:1}),(0,l.R1)(t).isReady?((0,s.uX)(),(0,s.Wv)(Ht,{key:0})):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)("...")],64))]),_:1})}}};const Vt=(0,f.A)(Qt,[["__scopeId","data-v-2314f0b4"]]);var qt=Vt,Gt={created:function(){window.location.href=`https://v0.dapp.robonomics.network/${this.$route.href}`}};const zt=Gt;var Jt=zt;function Yt(e,t,n,a,o,r){const i=(0,s.g2)("robo-template-rws-buy"),l=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(l,null,{default:(0,s.k6)(()=>[(0,s.bF)(i,{price:a.price,activationtime:"2",available:a.freeAuctions,chainInfoUploaded:a.chainInfoStatus,rwsExpiration:a.expiredate,onOnActivate:a.onActivate},null,8,["price","available","chainInfoUploaded","rwsExpiration","onOnActivate"])]),_:1})}var Zt=n(79173),en={setup(){const e=(0,l.KR)(0),t=(0,l.KR)(!1),{isConnected:n,instance:a}=(0,F.Op)(),{account:o}=(0,S.F7)(),{balance:r}=(0,S.Av)(o),{data:i}=(0,oe.Rs)(o),{data:u}=(0,ae.tR)(o),{data:c}=(0,oe.Rb)(),{tx:d}=(0,S.qT)(),{batch:p}=(0,Zt.y)(),v=(0,ae.y3)(),m=(0,oe.y3)();(0,s.wB)(n,async n=>{if(n){const n=a.api.consts.rws.minimalBid;e.value=n.add((0,Ut.A)(1)),t.value=!0}},{immediate:!0});const y=async t=>{if(!n.value)return void t("error","Parachain is not ready");if(!r.value||(0,Ut.A)(r.value).lt(e.value.add((0,Ut.A)(1e7))))return console.log(r.value.toString()),void t("error","Subscription can not be activated due to unsuffcicient XRT balance");if(c.value<=0)return console.log(c.value),void t("error","There are no available subscriptions");if(i.value.hasSubscription&&i.value.isActive)return void t("error","You have an active subscription");const a=[await m.bid(1000000001)];if(u.value.includes(o.value)||a.push(v.add(u.value,o.value)),await d.send(()=>p(a)),d.error.value)return void("Cancelled"!==d.error.value?t("error",d.error.value):t("cancel"));const l=(0,s.nT)(()=>{i.value.hasSubscription&&i.value.isActive&&(l(),t("ok"))})},f=(0,s.EW)(()=>n.value?T(e.value,9,0):0),h=(0,s.EW)(()=>i.value?i.value.validUntil:null);return{freeAuctions:c,price:f,expiredate:h,chainInfoStatus:t,onActivate:y}}};const tn=(0,f.A)(en,[["render",Yt]]);var nn=tn;function an(e,t,n,a,o,r){const i=(0,s.g2)("robo-text"),l=(0,s.g2)("robo-rws-setup"),u=(0,s.g2)("robo-tab"),c=(0,s.g2)("robo-rws-setups-list"),d=(0,s.g2)("robo-tabs"),p=(0,s.g2)("robo-section"),v=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(v,null,{default:(0,s.k6)(()=>[(0,s.bF)(p,{width:"narrow",centered:""},{default:(0,s.k6)(()=>[(0,s.bF)(i,{title:"3",offset:"x1"},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("Saved subscription setups",-1)])]),_:1}),e.$store.state.robonomicsUIvue.rws.list.length>1?((0,s.uX)(),(0,s.Wv)(d,{key:0},{default:(0,s.k6)(()=>[(0,s.bF)(u,{label:"Active subscription"},{default:(0,s.k6)(()=>[(0,s.bF)(l,{onUserDelete:a.removeUser,onUserAdd:a.addUser,onSaveHapass:a.saveHapass,onControllerEdit:a.editController},null,8,["onUserDelete","onUserAdd","onSaveHapass","onControllerEdit"])]),_:1}),(0,s.bF)(u,{label:"All subscriptions"},{default:(0,s.k6)(()=>[(0,s.bF)(c)]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(l,{key:1,onUserDelete:a.removeUser,onUserAdd:a.addUser,onSaveHapass:a.saveHapass,onControllerEdit:a.editController},null,8,["onUserDelete","onUserAdd","onSaveHapass","onControllerEdit"]))]),_:1})]),_:1})}var on=n(85364),rn=n(28276),sn={setup(){const e=(0,c.Pj)(),t=(0,s.EW)(()=>e.state.robonomicsUIvue.rws.active),{isConnected:n}=(0,F.Op)(),{account:a,setSubscription:o}=(0,S.F7)(),{data:r}=(0,ae.tR)(a),{tx:i}=(0,S.qT)(),l=(0,ae.y3)(),u=(0,rn.y3)(),{setFromPair:d,setSender:p,encryptor:v}=Z(),m=async(s,u,{skipDuplicateCheck:c=!1}={})=>{if(n.value)if(t.value&&t.value!==a.value)u("error","You do not have access to this action.");else{if(r.value.includes(s))return c?void u("ok"):void u("error","The address is already in the subscription.");o(a.value),await i.send(l.add(r.value,s)),i.error.value?"Cancelled"!==i.error.value?u("error",i.error.value):u("cancel"):(e.commit("rws/setUsers",r),u("ok"))}else u("error","Parachain is not ready.")},y=async(e,t)=>m(e,t,{skipDuplicateCheck:!1}),f=async(e,t)=>m(e,t,{skipDuplicateCheck:!0}),h=async(s,u)=>{n.value?t.value&&t.value!==a.value?u("error","You do not have access to this action."):r.value.includes(s)&&(o(a.value),await i.send(l.remove(r.value,s)),i.error.value)?"Cancelled"!==i.error.value?u("error",i.error.value):u("cancel"):(e.commit("rws/setUsers",r),u("ok")):u("error","Parachain is not ready.")},b=async(a,s)=>{if(!n.value)return void s("error","Parachain is not ready.");const l=e.state.robonomicsUIvue.rws.user.account,c=e.state.robonomicsUIvue.rws.user.acctype??"ed25519";console.log("userType",c),d(e.state.robonomicsUIvue.rws.user.key);const m=v();try{(0,N.j)(l)}catch(g){return void s("error",g.message)}const y=r.value.map(e=>(0,N.j)(e));if(!y.includes((0,N.j)(l)))return void s("error","User not found in subscription");const f=e.state.robonomicsUIvue.rws.list.find(e=>e.owner===t.value),h=m.encryptMessage(a,(0,on.F)(f.controller.address)),b=m.encryptMessage(a,(0,on.F)(l));o(f.owner),await i.send(u.write(JSON.stringify({subscription:f.owner,ha:f.controller.address,admin:(0,z.X)(h),user:(0,z.X)(b)})));try{const t=e.state.robonomicsUIvue.polkadot.accounts.find(t=>t.address===e.state.robonomicsUIvue.polkadot.address);t&&p(t.address,e.state.robonomicsUIvue.polkadot.extensionObj.signer,t.type)}catch(w){console.error(w)}i.error.value?"Cancelled"!==i.error.value?s("error",i.error.value):s("cancel"):s("ok")};return{saveHapass:b,addUser:y,editController:f,removeUser:h}}};const ln=(0,f.A)(sn,[["render",an]]);var un=ln,cn={__name:"RwsSetupNew",setup(e){const{isConnected:t}=(0,F.Op)(),{load:n}=(0,oe.IT)(),a=async(e,a)=>{(0,s.wB)(t,async t=>{if(t)try{const t=await n(e);a(t?t.validUntil:null)}catch(o){console.log(o),a(null)}},{immediate:!0})},o=async()=>{};return(e,t)=>{const n=(0,s.g2)("robo-rws-setup-new"),r=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(r,null,{default:(0,s.k6)(()=>[(0,s.bF)(n,{onRequestSubscription:a,onSetupGenerate:o})]),_:1})}}};const dn=cn;var pn=dn;function vn(e,t){const n=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(n,null,{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)(" energy-monitor ",-1)])]),_:1})}const mn={},yn=(0,f.A)(mn,[["render",vn]]);var fn=yn;const hn={key:0},bn={key:0},gn={key:0},wn={key:1},kn={key:0},_n={key:2},En={key:0};function Cn(e,t,n,a,o,r){const i=(0,s.g2)("robo-input"),l=(0,s.g2)("account-unlock"),u=(0,s.g2)("d-twin"),c=(0,s.g2)("ipfs-file"),d=(0,s.g2)("encrypt-message"),p=(0,s.g2)("ipfs-upload"),v=(0,s.g2)("crust-store"),m=(0,s.g2)("d-twin-save"),y=(0,s.g2)("robo-layout-section");return(0,s.uX)(),(0,s.Wv)(y,null,{default:(0,s.k6)(()=>[t[19]||(t[19]=(0,s.eW)(" Subscription owner: ",-1)),(0,s.bF)(i,{modelValue:a.owner,"onUpdate:modelValue":t[0]||(t[0]=e=>a.owner=e)},null,8,["modelValue"]),(0,s.bF)(l,{onUnlock:t[1]||(t[1]=()=>{a.isUnlock=!0})}),t[20]||(t[20]=(0,s.Lk)("hr",null,null,-1)),a.isUnlock?((0,s.uX)(),(0,s.CE)("div",hn,[t[16]||(t[16]=(0,s.Lk)("h2",null,"Digital twin",-1)),((0,s.uX)(),(0,s.Wv)(u,{address:a.owner,owner:a.owner,key:a.updateKey,onTwinId:t[2]||(t[2]=e=>{a.twinId=e}),onFind:t[3]||(t[3]=e=>{a.finedFiles=e})},null,8,["address","owner"])),t[17]||(t[17]=(0,s.Lk)("hr",null,null,-1)),a.finedFiles?((0,s.uX)(),(0,s.CE)("div",bn,[t[8]||(t[8]=(0,s.Lk)("h2",null,"Files",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.finedFiles,e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e},["0x0000000000000000000000000000000000000000000000000000000000000000"!==e?((0,s.uX)(),(0,s.Wv)(c,{key:0,hex:e},null,8,["hex"])):(0,s.Q3)("",!0)],64))),128))])):(0,s.Q3)("",!0),t[18]||(t[18]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[t[12]||(t[12]=(0,s.Lk)("h2",null,"Setup",-1)),(0,s.bF)(d,{onEncrypt:t[4]||(t[4]=e=>{a.messageHash=e})}),t[13]||(t[13]=(0,s.Lk)("hr",null,null,-1)),a.messageHash?((0,s.uX)(),(0,s.CE)("div",gn,[t[9]||(t[9]=(0,s.Lk)("h3",null,"Upload to ipfs",-1)),(0,s.bF)(p,{data:a.messageHash,onUpload:t[5]||(t[5]=e=>{a.ipfsFile=e})},null,8,["data"])])):(0,s.Q3)("",!0),t[14]||(t[14]=(0,s.Lk)("hr",null,null,-1)),a.ipfsFile?((0,s.uX)(),(0,s.CE)("div",wn,[t[10]||(t[10]=(0,s.Lk)("h3",null,"Save to crust",-1)),(0,s.bF)(v,{file:a.ipfsFile,onStore:t[6]||(t[6]=()=>{a.isStored=!0})},null,8,["file"]),a.isStored?((0,s.uX)(),(0,s.CE)("div",kn,"Crust saved")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),t[15]||(t[15]=(0,s.Lk)("hr",null,null,-1)),a.twinId&&a.ipfsFile?((0,s.uX)(),(0,s.CE)("div",_n,[t[11]||(t[11]=(0,s.Lk)("h3",null,"Save to digital twin",-1)),(0,s.bF)(m,{owner:a.owner,twinId:a.twinId,address:a.owner,data:a.ipfsFile.path,onSave:t[7]||(t[7]=()=>{a.isStored=!0,a.updateKey++})},null,8,["owner","twinId","address","data"]),a.isStored?((0,s.uX)(),(0,s.CE)("div",En,"Digital twin saved")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)]),_:1})}function Tn(e,t,n,a,o,r){const i=(0,s.g2)("robo-input"),l=(0,s.g2)("robo-button");return(0,s.uX)(),(0,s.CE)("div",null,[t[2]||(t[2]=(0,s.eW)(" Account seed: ",-1)),(0,s.bF)(i,{modelValue:a.seed,"onUpdate:modelValue":t[0]||(t[0]=e=>a.seed=e)},null,8,["modelValue"]),(0,s.bF)(l,{onClick:a.unlock},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)("unlock",-1)])]),_:1},8,["onClick"])])}var In={name:"AccountUnlock",emits:["unlock"],setup(e,{emit:t}){const n=(0,l.KR)(""),{setFromUri:a}=Z(),o=async()=>{try{await a(n.value)}catch(e){return void console.log(e)}t("unlock")};return{seed:n,unlock:o}}};const Fn=(0,f.A)(In,[["render",Tn]]);var Sn=Fn;const Rn={key:0},An={key:1},xn={key:0},On={key:0},Wn={key:1},Un={key:2};function Nn(e,t,n,a,o,r){const i=(0,s.g2)("robo-button");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",null,[t[0]||(t[0]=(0,s.Lk)("b",null,"Ipfs file info",-1)),(0,s.eW)(": "+(0,u.v_)(n.file),1)]),a.info?((0,s.uX)(),(0,s.CE)("div",Rn,"replica: "+(0,u.v_)(a.info.reported_replica_count),1)):(0,s.Q3)("",!0),a.balance&&a.price?((0,s.uX)(),(0,s.CE)("div",An,[(0,s.Lk)("div",null,[t[1]||(t[1]=(0,s.Lk)("b",null,"Balance",-1)),(0,s.eW)(": "+(0,u.v_)(e.$filters.balance(a.balance,12,"CRU")),1)]),(0,s.Lk)("div",null,[t[2]||(t[2]=(0,s.Lk)("b",null,"Price",-1)),(0,s.eW)(": "+(0,u.v_)(e.$filters.balance(a.price,12,"CRU")),1)]),null===a.info?((0,s.uX)(),(0,s.CE)("div",xn,[a.canStored?((0,s.uX)(),(0,s.CE)("div",On,[(0,s.bF)(i,{onClick:a.storeFile},{default:(0,s.k6)(()=>[...t[3]||(t[3]=[(0,s.eW)("store file",-1)])]),_:1},8,["onClick"])])):((0,s.uX)(),(0,s.CE)("div",Wn,"low balance"))])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",Un,"..."))])}n(7588);var Xn=n(3976),Kn=n(69156),Pn=n(6414),Ln=n(25615);class Bn{constructor(e){this.isReady=!1,this.init(e)}watch(e){if(this.isReady)return void e();const t=setInterval(()=>{if(this.isReady)return clearInterval(t),void e()},100)}async init(e){this.provider=new Kn.E(e),this.api=await Pn.G.create({provider:this.provider,typesBundle:Xn.typesBundleForPolkadot}),await(0,Ln.C)(),this.isReady=!0}async getBalance(e,t){if(!t){const{data:t}=await this.api.query.system.account(e);return t.free.sub(t.feeFrozen).toNumber()}return this.api.query.system.account(e,({data:e})=>{t(e.free.sub(e.feeFrozen).toNumber())})}async getStorePrice(e){const t=await this.api.query.market.fileBaseFee(),n=await this.api.query.market.fileByteFee();return Math.round(t.toNumber()+n.toNumber()*e/1048576)}async getInfo(e){return await this.api.query.market.filesV2(e)}addRenewalPoolBalance(e,t){return this.api.tx.market.addPrepaid(e,t)}storeFile(e,t,n=0){return this.api.tx.market.placeStorageOrder(e,t,n,"")}async signAndSend(e,t,n={}){return new Promise((a,o)=>{t.signAndSend(e.meta.isInjected?e.address:e,n,e=>{e.status.isInBlock&&e.events.forEach(async n=>{const{event:{method:r,section:s},phase:i}=n;if("system"===s&&"ExtrinsicFailed"===r){let t="Error";if(e.dispatchError?.isModule){const n=e.dispatchError.asModule,{docs:a,name:o,section:r}=n.registry.findMetaError(n);console.log(o,r,a),t=a.join(", ")}return o(new Error(t))}if("system"===s&&"ExtrinsicSuccess"===r){let n;if(this.api){const t=await this.api.rpc.chain.getBlock(e.status.asInBlock.toString());n=t.block.header.number.toNumber()}a({block:e.status.asInBlock.toString(),blockNumber:n,txIndex:i.asApplyExtrinsic.toHuman(),tx:t.hash.toString()})}})}).catch(o)})}}var Mn={name:"CrustStore",props:["file"],emits:["store"],setup(e,{emit:t}){const{account:n,pair:a}=(0,S.F7)(),o=new Bn("wss://rpc.crust.network"),r=(0,l.KR)(),i=(0,l.KR)(),u=(0,l.KR)();o.watch(async()=>{r.value=await o.getBalance(n.value),i.value=await o.getStorePrice(e.file.size),u.value=(await o.getInfo(e.file.path)).toHuman(),u.value&&t("store")});const c=(0,s.EW)(()=>r.value>i.value),d=async()=>{if(!1===c.value)return;const n=o.storeFile(e.file.path,e.file.size),r=await o.signAndSend(a.value,n);console.log(r),t("store")};return{balance:r,price:i,info:u,canStored:c,storeFile:d}}};const jn=(0,f.A)(Mn,[["render",Nn]]);var $n=jn;function Dn(e,t,n,a,o,r){const i=(0,s.g2)("select-twin"),l=(0,s.g2)("create-twin");return(0,s.uX)(),(0,s.CE)("div",null,[((0,s.uX)(),(0,s.Wv)(i,{onChange:t[0]||(t[0]=e=>a.twinId=e),key:a.keySelect})),(0,s.bF)(l,{owner:n.owner,onCreate:t[1]||(t[1]=e=>a.keySelect++)},null,8,["owner"])])}var Hn=n(67441),Qn=n(58580),Vn=n(21209),qn={props:["address","owner","data"],emits:["twinId","find"],components:{SelectTwin:Vn.A,CreateTwin:Qn.A},setup(e,{emit:t}){const n=(0,l.KR)(),a=(0,l.KR)(0),o=(0,l.KR)(0),{data:r}=(0,Hn.Iu)(n);return(0,s.wB)(n,e=>{t("twinId",e)}),(0,s.wB)(r,n=>{if(n){const a=[];for(const t in n)n[t]===e.address&&a.push(t);t("find",a)}}),{twinId:n,keySelect:a,keyRecords:o}}};const Gn=(0,f.A)(qn,[["render",Dn]]);var zn=Gn;function Jn(e,t,n,a,o,r){const i=(0,s.g2)("robo-button");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(i,{onClick:a.save},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("save to digital twin",-1)])]),_:1},8,["onClick"])])}function Yn(e){const t=Buffer.from(e.toString(),"utf-8");if(t.length>32)throw new Error("max 32");const n=Buffer.alloc(32),a=Buffer.concat([n,t]),o=Buffer.from(a).slice(a.length-32,a.length);return"0x"+o.toString("hex")}var Zn={props:["twinId","owner","address","data"],emits:["save"],setup(e,{emit:t}){const n=(0,Hn.y3)(),{tx:a}=(0,S.qT)(),o=async()=>{if(await a.send(()=>n.setSource(e.twinId,Yn(e.data),e.address),{subscription:e.owner}),a.error.value)return"Cancelled"!==a.error.value?console.log(a.error.value):console.log("cancel"),!1;t("save")};return{save:o}}};const ea=(0,f.A)(Zn,[["render",Jn]]);var ta=ea;function na(e,t,n,a,o,r){const i=(0,s.g2)("robo-input"),l=(0,s.g2)("robo-button");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(i,{modelValue:a.data,"onUpdate:modelValue":t[0]||(t[0]=e=>a.data=e)},null,8,["modelValue"]),(0,s.bF)(l,{onClick:a.encrypt},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)("encrypt",-1)])]),_:1},8,["onClick"])])}var aa={name:"EncryptMessage",emits:["encrypt"],setup(e,{emit:t}){const n=(0,l.KR)('{"name":"blushing cow"}'),{encryptor:a}=Z(),o=()=>{const e=a(),o=e.encryptMessage(n.value,(0,on.F)(e.address)),r=(0,z.X)(o);t("encrypt",r)};return{data:n,encrypt:o}}};const oa=(0,f.A)(aa,[["render",na]]);var ra=oa;const sa={class:"block"},ia=["href"],la={key:0};function ua(e,t,n,a,o,r){return(0,s.uX)(),(0,s.CE)("div",sa,[(0,s.Lk)("a",{href:`https://ipfs.io/ipfs/${a.ipfsHash}`,target:"_blank"},(0,u.v_)(a.ipfsHash),9,ia),(0,s.Lk)("div",null,[t[0]||(t[0]=(0,s.Lk)("b",null,"crust info",-1)),(0,s.eW)(": "+(0,u.v_)(a.info),1)]),a.encrypt?((0,s.uX)(),(0,s.CE)("div",la,[t[1]||(t[1]=(0,s.Lk)("b",null,"encrypt",-1)),(0,s.eW)(": "+(0,u.v_)(a.encrypt),1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[t[2]||(t[2]=(0,s.Lk)("b",null,"data",-1)),(0,s.eW)(": "+(0,u.v_)(a.content),1)])])}var ca=n(78636),da=n(70629),pa={name:"IpfsFile",props:["hex"],setup(e){const t=(0,l.KR)(),n=(0,l.KR)(),a=(0,l.KR)(),o=(0,ca.XV)(e.hex),{encryptor:r}=Z(),s=new Bn("wss://rpc.crust.network");function i(e,t){const{[e]:n,...a}=t;return[a,n]}s.watch(async()=>{const e=(await s.getInfo(o)).toHuman();if(e){const t=i("replicas",e);a.value={...t[0],replicas:Object.keys(t[1]).length}}else a.value="File is not pinned in crust network"});const u=e=>{const t=r(),n=t.decryptMessage(e,(0,on.F)(t.address));return(0,da.F)(n)},c=async()=>{try{const e=await Ne.A.get(`https://ipfs.io/ipfs/${o}`);e.data.startsWith("0x")?(t.value=e.data,n.value=u(e.data)):(t.value=void 0,n.value=e.data)}catch(e){console.log(e)}};return c(),{ipfsHash:o,info:a,encrypt:t,content:n}}};const va=(0,f.A)(pa,[["render",ua],["__scopeId","data-v-f6b8942a"]]);var ma=va;function ya(e,t,n,a,o,r){const i=(0,s.g2)("robo-input"),l=(0,s.g2)("robo-button");return(0,s.uX)(),(0,s.CE)("div",null,[t[2]||(t[2]=(0,s.eW)(" Encrypted content: ",-1)),(0,s.Lk)("small",null,(0,u.v_)(n.data),1),(0,s.bF)(i,{modelValue:a.ipfsGateway,"onUpdate:modelValue":t[0]||(t[0]=e=>a.ipfsGateway=e)},null,8,["modelValue"]),(0,s.bF)(l,{onClick:a.upload},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)("upload",-1)])]),_:1},8,["onClick"])])}var fa=n(49283),ha={name:"IpfsUpload",props:["data"],emits:["upload"],setup(e,{emit:t}){const n=(0,l.KR)("https://ipfs-gw.decloud.foundation"),{account:a}=(0,S.F7)(),{signMsg:o}=Z(),r=async()=>{const r=new pe(n.value);try{const n=o((0,fa.j)(a.value));r.auth(null,a.value,n);const s=await r.add(e.data);t("upload",{path:s.path,size:s.size})}catch(s){console.log(s)}};return{ipfsGateway:n,upload:r}}};const ba=(0,f.A)(ha,[["render",ya]]);var ga=ba,wa={name:"PageSave",components:{AccountUnlock:Sn,EncryptMessage:ra,DTwin:zn,DTwinSave:ta,IpfsUpload:ga,IpfsFile:ma,CrustStore:$n},setup(){const e=(0,l.KR)(!1),t=(0,l.KR)(""),n=(0,l.KR)(),a=(0,l.KR)(!1),o=(0,l.KR)(!1),r=(0,l.KR)(),s=(0,l.KR)(),i=(0,l.KR)(0),u="";return{isUnlock:e,messageHash:t,ipfsFile:n,isStored:a,isSaved:o,twinId:r,finedFiles:s,owner:u,updateKey:i}}};const ka=(0,f.A)(wa,[["render",Cn],["__scopeId","data-v-dcb50b02"]]);var _a=ka;function Ea(e,t,n,a,o,r){const i=(0,s.g2)("Libp2p"),l=(0,s.g2)("Launch");return"libp2p"===a.type?((0,s.uX)(),(0,s.Wv)(i,{key:0,config:a.config,cid:a.cid,isKey:a.isKey,onConnected:a.handlerConnected,onError:a.handlerError},null,8,["config","cid","isKey","onConnected","onError"])):((0,s.uX)(),(0,s.Wv)(l,{key:1,config:a.config,cid:a.cid,isKey:a.isKey},null,8,["config","cid","isKey"]))}function Ca(e,t,n,a,o,r){const i=(0,s.g2)("robo-smarthome-dashboard");return(0,s.uX)(),(0,s.Wv)(i,{config:n.config,datalog:a.data,cid:n.cid,updateTime:a.updateTime},null,8,["config","datalog","cid","updateTime"])}function Ta(){const{account:e}=(0,S.F7)(),{instance:t}=(0,s.WQ)("IpfsProvider");return(0,s.wB)(e,async()=>{t.value&&t.value.authClear()}),t.value}const Ia=e=>e.replaceAll("'",'"').replaceAll("\\","").replaceAll('""','"').replaceAll("True","true").replaceAll("False","false").replaceAll("None",'"None"'),Fa=e=>{try{return JSON.parse(e)}catch(t){console.log("error parse 1")}try{return JSON.parse(Ia(e))}catch(t){console.log("error parse 2"),console.log(e)}return!1};async function Sa(e){return e.consts.datalog.windowSize.toBn().subn(1).toNumber()}async function Ra(e,t){const n=await e.query.datalog.datalogIndex(t);return{start:n.start.toNumber(),end:n.end.toNumber()}}async function Aa(e,t,n){return await e.query.datalog.datalogItem([t,n])}async function xa(e,t){let n=null,a=!1;const o=await Ra(e,t);if(o.start!=o.end){n=o.end-1;const t=await Sa(e);n<0&&(n=t),(o.start>0||o.end===t)&&(a=!0)}return{id:n,full:a}}const Oa=async(e,t)=>{if(!t)return!1;const n=await xa(e,t);if(null!==n.id&&n.id>=0){const a=await Aa(e,t,n.id);return{timestamp:a[0].toNumber(),cid:(0,da.F)(a[1])}}return!1};var Wa=n(45643),Ua=n(20807);const Na=async e=>new Promise(t=>{if(e.state.robonomicsUIvue.ipfs.activeGateway)return void t(e.state.robonomicsUIvue.ipfs.activeGateway);let n;n=(0,s.wB)(()=>e.state.robonomicsUIvue.ipfs.activeGateway,async e=>{e&&(t(e),n&&n())},{immediate:!0})}),Xa=async(e,t)=>{if(!t)return!1;try{const n=await Na(e),a=(await Ne.A.get(`${n}/ipfs/${t}`)).data;return a}catch(n){throw console.log(n),new Error("File not available")}},Ka=async(e,t,n)=>{if(e)try{const a=(0,on.F)(t),o=n.decryptMessage((0,Ua.V)(e[n.address]),a),r=V(Q((0,da.F)(o))),s=r.decryptMessage((0,Ua.V)(e.data),a);return Fa((0,da.F)(s))}catch(a){console.log(a.message)}return!1},Pa=async(e,t,n,a)=>{if(e){const o=await Xa(a,e);if(!o)throw console.log(`Error: ${e} not found in ipfs`),new Error(`${e} not found in ipfs`);const r=await Ka(o,t,n);if(r)return r;throw console.log("Error: decryptMsg"),new Error("decryptMsg")}return null},La=e=>{if(e.state.robonomicsUIvue.rws.active){const n=e.state.robonomicsUIvue.rws.list.find(t=>t.owner===e.state.robonomicsUIvue.rws.active);if(n)try{return{controller:n.controller.address,owner:n.owner}}catch(t){console.log(t)}}return!1},Ba=()=>{const e=(0,l.KR)(null),t=(0,l.KR)(null),n=(0,c.Pj)();return(0,s.wB)(()=>n.state.robonomicsUIvue.rws.active,()=>{const a=La(n);a&&(e.value=a.controller,t.value=a.owner)},{immediate:!0}),{controller:e,owner:t}},Ma=(e,t,n=3e3)=>{e.dispatch("app/setStatus",{value:t,timeout:n})},ja=(e,t,n)=>{e.commit("rws/setLaunch",JSON.stringify({...t,tx:{tx_status:n}}))},$a=async(e,t,n)=>{if(!e||!n&&0!==n)return!1;const a=await t(n);if(!a)return!1;const o=Object.keys(a).find(t=>a[t]===e);return!!o&&(0,ca.XV)(o)},Da=()=>{const e=(0,l.KR)(null),t=(0,l.KR)(""),n=(0,c.Pj)(),{isConnected:a,instance:o}=(0,F.Op)(),{encryptor:r}=Z(),{controller:i}=Ba(),{getTwin:u}=(0,Hn.IT)(),{pair:d}=(0,S.F7)(),p=async e=>{const s=localStorage.getItem("rpc-parachain")||me.A.default_rpc_endpoint,i=`haconfig:${s}:${e}`;if(a.value){const a=await Oa(o.api,e);t.value=a.cid;const s=await Pa(a.cid,e,r(),n);if(s){const t=s.twin_id;Ma(n,`Twin id #${t}`),Ma(n,"Start load config");const a=await $a(e,u,t);a||(console.log("Config not found"),console.log("controller",e),console.log("twin_id",t));const o=await Pa(a,e,r(),n);return localStorage.setItem(i,JSON.stringify({time:Date.now(),value:o})),console.log("getConfig chain"),{data:o,cache:!1}}}else{const e=localStorage.getItem(i);if(!e)return{data:null,cache:!0};try{const t=JSON.parse(e);return console.log("getConfig cache"),{data:t.value,cache:!0}}catch(l){console.log("haconfig bad",l)}}return{data:null,cache:!1}},v=async()=>{if(Ma(n,"Find twin id"),!i.value||!d.value||"ed25519"!==d.value.type)return void Ma(n,"Error");let t;try{t=await p(i.value)}catch(o){return console.log(o),void Ma(n,"Error: "+o.message)}if(e.value=t.data,t.cache){const t=(0,s.wB)(a,async()=>{if(a.value)try{const n=await p(i.value);e.value=n.data,t()}catch(o){console.log(o),Ma(n,"Error: "+o.message)}},{immediate:!0})}null!==e.value&&Ma(n,"Config loaded")};return{config:e,cid:t,load:v}},Ha=()=>{const e=(0,l.KR)(null),t=(0,l.KR)(null),n=(0,l.KR)(null),a=(0,c.Pj)(),o=Ta(),{isConnected:r,instance:i,watchConnect:u}=(0,F.Op)(),{encryptor:d,signMsg:p}=Z(),{pair:v,account:m}=(0,S.F7)(),{tx:y}=(0,S.qT)(),f=(0,Wa.y3)(),h=(0,l.KR)(),{data:b}=(0,ae.tR)(h,{immediate:!1}),{controller:g,owner:w}=Ba(),{listen:k}=(0,rn.IT)();let _;(0,s.wB)(()=>a.state.robonomicsUIvue.rws.active,()=>{h.value=a.state.robonomicsUIvue.rws.active},{immediate:!0}),u(async()=>{_=await k({method:"NewRecord",sender:g.value},n=>{t.value=n.data[0],e.value=n.data[1]})}),(0,s.hi)(()=>{console.log("unmount launch"),_&&_()}),(0,s.wB)(e,async()=>{try{n.value=await Pa(e.value,g.value,d(),a)}catch(t){console.log(t),Ma(a,t.message)}});const E=async()=>{if(g.value)if(r.value){const n=await Oa(i.api,g.value);e.value=n.cid,t.value=n.timestamp}else{const e=(0,s.wB)(r,t=>{t&&(E(),e())})}},C=async e=>{if(console.log(e.launch.params.entity_id,e.tx.tx_status),"pending"!==e.tx.tx_status)return;if(Ma(a,"Launch command"),console.log(`command ${JSON.stringify(e)}`),!b.value||!b.value.includes(m.value))return Ma(a,"Error: You do not have access to device management."),void ja(a,e,"error");if(!o.isAuth()){Ma(a,"Authorization on ipfs node");try{const e=p((0,fa.j)(v.value.address));o.auth(w.value,m.value,e)}catch(i){return void("Cancelled"===i.message?ja(a,e,"declined"):(console.log(i),ja(a,e,"error")))}ja(a,e,"approved")}const t=d(),n=(0,on.F)(g.value);let s;try{const a=JSON.stringify(e.launch),r=t.encryptMessage(a,n);s=await o.add((0,z.X)(r))}catch(i){return ja(a,e,"error"),void Ma(a,`Error: ${i.message}`)}if(console.log(`launch ipfs file ${s.path}`),!r.value)return Ma(a,"Error: Robonomics is not ready."),void ja(a,e,"error");Ma(a,"Send launch"),await y.send(()=>f.launch(g.value,(0,ca.$o)(s.path)),{subscription:w.value}),y.error.value?"Cancelled"!==y.error.value?(ja(a,e,"error"),Ma(a,`Error: ${y.error.value}`)):(ja(a,e,"declined"),Ma(a,"Calcel")):(console.log(e),ja(a,e,"success"),Ma(a,"Launch sended"))};return{cid:e,updateTime:t,data:n,run:E,stop:stop,launch:C}};var Qa={props:{isKey:{default:!1,type:Boolean},config:{default:null,type:Object},cid:{type:String}},setup(e){const{data:t,updateTime:n,run:a,launch:o}=Ha(),r=(0,c.Pj)();return(0,s.wB)(()=>e.isKey,e=>{e&&a()},{immediate:!0}),(0,s.wB)(()=>r.state.robonomicsUIvue.rws.launch,e=>{try{o(JSON.parse(e))}catch(t){console.log(t)}}),{data:t,updateTime:n}}};const Va=(0,f.A)(Qa,[["render",Ca]]);var qa=Va;function Ga(e,t,n,a,o,r){const i=(0,s.g2)("robo-smarthome-dashboard");return(0,s.uX)(),(0,s.Wv)(i,{config:n.config,datalog:a.data,cid:n.cid,updateTime:a.updateTime},null,8,["config","datalog","cid","updateTime"])}var za=n(55847),Ja=n(28992),Ya=n(59322),Za=n(95741),eo=n(1882),to=n(64116),no=n(81352),ao=n(13095),oo=n(70353),ro=n(33641),so=n(80306);function io(){return e=>{async function t(e){return(0,oo.F)(e,async function(e){let t="";for await(const n of e)t+=(0,so.d)(n.subarray());return JSON.parse(t)})}async function n(e,t){return(0,oo.F)([(0,ro.s)(JSON.stringify(t))],e.sink).finally(()=>{e.close()})}return{async handle(n,a,o={runOnTransientConnection:!0}){await e.registrar.handle(n,async({stream:e})=>{a(await t(e),e)},o)},async request(e,t,n,a={runOnTransientConnection:!0}){if("open"!==e.status)return;const o=await e.newStream([t],a);return(0,oo.F)([(0,ro.s)(JSON.stringify(n))],o,async function(e){let t="";for await(const a of e)t+=(0,so.d)(a.subarray());try{return JSON.parse(t)}catch(n){return t}})},utils:{getRequest:t,sendResponse:n}}}}async function lo(){const e=await(0,ao.E)({transports:[(0,eo.h)({filter:to.Q7}),(0,Ja.y)()],streamMuxers:[(0,Za.t)()],connectionEncryption:[(0,za.f)()],services:{identify:(0,Ya.l)(),ha:io()},connectionGater:{denyDialMultiaddr:()=>!1},connectionManager:{minConnections:0}});return e}function uo(e){return(0,no.HZ)(`/dns4/libp2p-relay-1.robonomics.network/tcp/443/wss/p2p/12D3KooWEMFXXvpZUjAuj1eKR11HuzZTCQ5HmYG9MNPtsnqPSERD/p2p-circuit/p2p/${e}`)}async function co(e,t){if(t.length>0){const e=[],a=[];for(const n of t){const t=(0,no.HZ)(n),o=t.protoNames();(o.includes("ws")||o.includes("wss"))&&(o.includes("p2p-circuit")?a.push(t):("https:"!==window.location.protocol||o.includes("wss"))&&e.push(t))}if(e.length>0)for(const t of e)try{return await ho(t),t}catch(n){console.log(n)}if(a.length>0)for(const t of a)try{return await ho(t),t}catch(n){console.log(n)}}try{const t=uo(e);return await ho(t),t}catch(n){console.log(n)}return!1}let po=null,vo=[],mo=null;async function yo(){if(po)return po;function e(){vo=po.getConnections().map(e=>e.remoteAddr.toString()),console.log("Update Connections List",vo)}return po=await lo(),await po.start(),console.log(`Node started with id ${po.peerId.toString()}`),po.addEventListener("connection:open",t=>{console.log("connected",t.detail.remoteAddr.toString()),e()}),po.addEventListener("connection:close",t=>{console.log("disconected",t.detail.remoteAddr.toString()),e(),setTimeout(()=>{mo&&t.detail.remoteAddr.toString()===mo.remoteAddr.toString()&&(console.log("reconnect"),fo(mo.remoteAddr.toString()))},1e4)}),po}async function fo(e){try{await ho(e)}catch(t){console.log(t)}}async function ho(e){if(console.log("connect to",e.toString()),!vo.includes(e)){const t=(0,no.HZ)(e);mo=await po.dial(t)}return e}async function bo(){mo&&await mo.close(),mo=null}function go(e,t="/call"){if(po&&mo)return po.services.ha.request(mo,t,e);throw new Error("error")}const wo=()=>{const e=(0,l.KR)(null),t=(0,l.KR)(null),n=(0,c.Pj)(),{encryptor:a}=Z(),{account:o}=(0,S.F7)(),r=(0,l.KR)(),{data:i}=(0,ae.tR)(r,{immediate:!1}),{controller:u}=Ba();(0,s.wB)(()=>n.state.robonomicsUIvue.rws.active,()=>{r.value=n.state.robonomicsUIvue.rws.active},{immediate:!0}),(0,s.hi)(()=>{bo()});const d=async(o,r)=>{const s=await yo();try{Ma(n,`Connect to peer id ${o}`);const i=await co(o,r);if(i){Ma(n,"Connected");const o=s.getProtocols();return o.includes("/update")&&await s.unhandle("/update"),s.services.ha.handle("/update",async(o,r)=>{const i=await Ka(o.data,u.value,a());i?(e.value=i,t.value=Date.now(),await s.services.ha.utils.sendResponse(r,{result:!0})):Ma(n,"Error: decryptMsg")}),i}}catch(i){Ma(n,`Error: ${i.message}`),console.log(i)}return!1},p=async e=>{if(console.log(e.launch.params.entity_id,e.tx.tx_status),"pending"===e.tx.tx_status){if(Ma(n,"Launch command"),!i.value.includes(o.value))return Ma(n,"Error: You do not have access to device management."),void ja(n,e,"error");try{const t=t(),a=(0,on.F)(u.value),r=JSON.stringify(e.launch),s=t.encryptMessage(r,a),i=await go({data:{sender:o.value,data:(0,z.X)(s)}});console.log("response:",i),ja(n,e,"success")}catch(t){console.log(t),Ma(n,"Error: Check status of the HomeAssistant."),ja(n,e,"error")}}};return{data:e,updateTime:t,run:d,launch:p}};var ko={props:{isKey:{default:!1,type:Boolean},config:{default:null,type:Object},cid:{type:String}},emits:["connected","error"],setup(e,{emit:t}){const{data:n,updateTime:a,run:o,launch:r}=wo(),i=(0,c.Pj)(),l=e.isKey&&null!==e.config,u=(0,s.wB)(()=>[e.isKey,e.config],([e,n])=>{e&&null!==n&&(l||"function"!==typeof u||u(),n.peer_id?(async()=>{const e=await o(n.peer_id,n.libp2p_multiaddress);e?t("connected",e):t("error",new Error("connect"))})():t("error",new Error("not found peer_id")))},{immediate:!0,once:l});return(0,s.wB)(()=>i.state.robonomicsUIvue.rws.launch,e=>{try{r(JSON.parse(e))}catch(t){console.log(t)}}),{data:n,updateTime:a}}};const _o=(0,f.A)(ko,[["render",Ga]]);var Eo=_o,Co={components:{Libp2p:Eo,Launch:qa},setup(){const e=(0,c.Pj)(),{isConnected:t}=(0,F.Op)(),{account:n}=(0,S.F7)(),{setFromPair:a,setSender:o}=Z(),{config:r,cid:i,load:u}=Da(),d=(0,l.KR)(!1),p=(0,s.EW)(()=>e.state.robonomicsUIvue.polkadot.connection.type);return(0,s.sV)(()=>{e.commit("polkadot/setConnectionStatus",null)}),(0,s.hi)(async()=>{if(t.value&&d.value&&e.state.robonomicsUIvue.polkadot.address!==n.value)try{const t=e.state.robonomicsUIvue.polkadot.accounts.find(t=>t.address===e.state.robonomicsUIvue.polkadot.address);t&&await o(t.address,e.state.robonomicsUIvue.polkadot.extensionObj.signer,t.type)}catch(a){console.error(a)}}),(0,s.wB)(()=>t.value,t=>{"parachain"===p.value&&e.commit("polkadot/setConnectionConnected",t)},{immediate:!0}),(0,s.wB)(()=>e.state.robonomicsUIvue.rws.user.key,async e=>{e?(await a(e),d.value=!0,u()):console.log("User key not found")},{immediate:!0}),{store:e,type:p,isKey:d,config:r,cid:i,handlerConnected:t=>{e.commit("polkadot/setConnectionType","libp2p"),t.protoNames().includes("p2p-circuit")?e.commit("polkadot/setConnectionStatus","via relay"):e.commit("polkadot/setConnectionStatus",null),e.commit("polkadot/setConnectionConnected",!0)},handlerError:t=>{console.log(t.message),console.log("Switching to parachain"),e.commit("polkadot/setConnectionType","parachain"),e.commit("polkadot/setConnectionConnected",!0),e.commit("polkadot/setConnectionStatus",null)}}}};const To=(0,f.A)(Co,[["render",Ea]]);var Io=To;const Fo=[{path:"/",name:"Home",component:Kt,meta:{title:"Dashboard"}},{path:"/rws-buy",name:"rwsActivate",component:nn,meta:{title:"Buy a Subscription"}},{path:"/rws-setup",name:"rwsSetup",component:un,meta:{title:"Setup a Subscription"}},{path:"/rws-setup-new",name:"rwsSetupNew",component:pn,meta:{title:"New Subscription setup"}},{path:"/telemetry",name:"telemetry",component:Io,meta:{title:"Devices control panel"}},{path:"/hardware/altruist",name:"Altruist",component:Fe,meta:{title:"Altruist"}},{path:"/hardware/riscv",name:"Riscv",component:We,meta:{title:"Riscv"}},{path:"/hardware/hikikomori",name:"Hikikomori",component:Ae,meta:{title:"Hikikomori"}},{path:"/hardware/season-pass",name:"SeasonPass",component:Ot,meta:{title:"Season Pass"}},{path:"/hardware/season-pass-2",name:"SeasonPass2",component:wt,meta:{title:"Season Pass 2"}},{path:"/hardware/energy-monitor",name:"EnergyMonitor",component:fn,meta:{title:"Energy Monitor"}},{path:"/humanoid",name:"Humanoid",component:qt,meta:{title:"Pay the robot with cryptocurrency"}},{path:"/altruist/:address?",props:!0,name:"AltruistPage",component:()=>n.e(336).then(n.bind(n,29336)),meta:{title:"Altruist"}},{path:"/energy-monitor/:address?",props:!0,name:"EnergytMonitorPage",component:()=>n.e(25).then(n.bind(n,67025)),meta:{title:"Energy"}},{path:"/dtwin",name:"DTwinPage",component:()=>n.e(956).then(n.bind(n,31956)),meta:{title:"Digital Twin"}},{path:"/save-setup",name:"save-setup",component:_a,meta:{title:"Savesetup"}},{path:"/:pathMatch(.*)*",component:Jt}],So=(0,R.aE)({history:(0,R.Bt)(),routes:Fo});var Ro=So;const Ao=(0,c.y$)({state:{name:"Vue"}});var xo=Ao,Oo={install:e=>{e.config.globalProperties.$filters={balance(e,t,n){return"string"===typeof e||"number"===typeof e||"bigint"===typeof e?`${T(e,t,4)} ${n}`:""}}}};window.Buffer=a.hp,I();const Wo=(0,r.Ef)(ce);Wo.use(Ro).use(xo).use(Oo).use(ye).use(Ce).use(ve,{api:{gateway:"https://ipfs.url.today"}}).use(o.w,{store:xo}).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],r=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every(function(e){return n.O[e](a[l])})?a.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(a,o){if(1&o&&(a=this(a)),8&o)return a;if("object"===typeof a&&a){if(4&o&&a.__esModule)return a;if(16&o&&"function"===typeof a.then)return a}var r=Object.create(null);n.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&a;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(function(e){s[e]=function(){return a[e]}});return s["default"]=function(){return a},n.d(r,s),r}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce(function(t,a){return n.f[a](e,t),t},[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{25:"7d6dd364",336:"f736c87e",956:"515952cc"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{25:"4c140b56",336:"e9ab38d0",956:"bd7e99eb"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="dapp-robonomics.network:";n.l=function(a,o,r,s){if(e[a])e[a].push(o);else{var i,l;if(void 0!==r)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+r){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=a),e[a]=[o];var p=function(t,n){i.onerror=i.onload=null,clearTimeout(v);var o=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach(function(e){return e(n)}),t)return t(n)},v=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,o,r){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",n.nc&&(s.nonce=n.nc);var i=function(n){if(s.onerror=s.onload=null,"load"===n.type)o();else{var a=n&&n.type,i=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+i+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=i,s.parentNode&&s.parentNode.removeChild(s),r(l)}};return s.onerror=s.onload=i,s.href=t,a?a.parentNode.insertBefore(s,a.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var o=n[a],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var s=document.getElementsByTagName("style");for(a=0;a<s.length;a++){o=s[a],r=o.getAttribute("data-href");if(r===e||r===t)return o}},a=function(a){return new Promise(function(o,r){var s=n.miniCssF(a),i=n.p+s;if(t(s,i))return o();e(a,i,null,o,r)})},o={524:0};n.f.miniCss=function(e,t){var n={25:1,336:1,956:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=a(e).then(function(){o[e]=0},function(t){throw delete o[e],t}))}}}(),function(){var e={524:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise(function(n,a){o=e[t]=[n,a]});a.push(o[2]=r);var s=n.p+n.u(t),i=new Error,l=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,o[1](i)}};n.l(s,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,s=a[0],i=a[1],l=a[2],u=0;if(s.some(function(t){return 0!==e[t]})){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var c=l(n)}for(t&&t(a);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self["webpackChunkdapp_robonomics_network"]=self["webpackChunkdapp_robonomics_network"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],function(){return n(96370)});a=n.O(a)})();
//# sourceMappingURL=app.5ade4853.js.map