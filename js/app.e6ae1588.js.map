{"version":3,"file":"js/app.e6ae1588.js","mappings":"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","sources":["webpack://dapp-robonomics.network/./src/App.vue","webpack://dapp-robonomics.network/./src/components/layouts/Main.vue","webpack://dapp-robonomics.network/./src/components/Header.vue","webpack://dapp-robonomics.network/./src/utils/tools.js","webpack://dapp-robonomics.network/./src/components/Header.vue?801b","webpack://dapp-robonomics.network/./src/hooks/useRobonomics.js","webpack://dapp-robonomics.network/./src/hooks/useDevices.js","webpack://dapp-robonomics.network/./src/hooks/useSubscription.js","webpack://dapp-robonomics.network/./src/components/layouts/Main.vue?a356","webpack://dapp-robonomics.network/./src/App.vue?7ccd","webpack://dapp-robonomics.network/./src/plugins/ipfs.js","webpack://dapp-robonomics.network/./src/utils/encryptor.js","webpack://dapp-robonomics.network/./src/plugins/robonomicsAccountManager.js","webpack://dapp-robonomics.network/./src/plugins/robonomics.js","webpack://dapp-robonomics.network/./src/views/Home.vue","webpack://dapp-robonomics.network/./src/views/Home.vue?9051","webpack://dapp-robonomics.network/./src/views/PathNotFound.vue","webpack://dapp-robonomics.network/./src/views/PathNotFound.vue?dbdf","webpack://dapp-robonomics.network/./src/views/RwsActivate.vue","webpack://dapp-robonomics.network/./src/hooks/useAccount.js","webpack://dapp-robonomics.network/./src/hooks/useBalance.js","webpack://dapp-robonomics.network/./src/hooks/useSend.js","webpack://dapp-robonomics.network/./src/views/RwsActivate.vue?116c","webpack://dapp-robonomics.network/./src/views/RwsSetup.vue","webpack://dapp-robonomics.network/./src/views/RwsSetup.vue?d6aa","webpack://dapp-robonomics.network/./src/views/RwsSetupNew.vue","webpack://dapp-robonomics.network/./src/views/RwsSetupNew.vue?1f64","webpack://dapp-robonomics.network/./src/views/Services.vue","webpack://dapp-robonomics.network/./src/views/Services.vue?0e03","webpack://dapp-robonomics.network/./src/views/telemetry/Telemetry.vue","webpack://dapp-robonomics.network/./src/views/telemetry/Launch.vue","webpack://dapp-robonomics.network/./src/hooks/useIpfs.js","webpack://dapp-robonomics.network/./src/utils/telemetry.js","webpack://dapp-robonomics.network/./src/views/telemetry/common.js","webpack://dapp-robonomics.network/./src/views/telemetry/launch.js","webpack://dapp-robonomics.network/./src/views/telemetry/Launch.vue?a7de","webpack://dapp-robonomics.network/./src/views/telemetry/Libp2p.vue","webpack://dapp-robonomics.network/./src/utils/libp2p/ha.js","webpack://dapp-robonomics.network/./src/utils/libp2p/libp2p.js","webpack://dapp-robonomics.network/./src/views/telemetry/libp2p.js","webpack://dapp-robonomics.network/./src/views/telemetry/Libp2p.vue?d944","webpack://dapp-robonomics.network/./src/views/telemetry/Telemetry.vue?f25e","webpack://dapp-robonomics.network/./src/router.js","webpack://dapp-robonomics.network/./src/store.js","webpack://dapp-robonomics.network/./src/utils/filters.js","webpack://dapp-robonomics.network/./src/main.js","webpack://dapp-robonomics.network/webpack/bootstrap","webpack://dapp-robonomics.network/webpack/runtime/amd options","webpack://dapp-robonomics.network/webpack/runtime/chunk loaded","webpack://dapp-robonomics.network/webpack/runtime/compat get default export","webpack://dapp-robonomics.network/webpack/runtime/create fake namespace object","webpack://dapp-robonomics.network/webpack/runtime/define property getters","webpack://dapp-robonomics.network/webpack/runtime/global","webpack://dapp-robonomics.network/webpack/runtime/hasOwnProperty shorthand","webpack://dapp-robonomics.network/webpack/runtime/make namespace object","webpack://dapp-robonomics.network/webpack/runtime/node module decorator","webpack://dapp-robonomics.network/webpack/runtime/jsonp chunk loading","webpack://dapp-robonomics.network/webpack/startup"],"sourcesContent":["<template>\n  <main-layout :pagetitle=\"title\">\n    <router-view />\n  </main-layout>\n</template>\n\n<script>\nimport MainLayout from \"@/components/layouts/Main.vue\";\nimport { inject, ref, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\n\nexport default {\n  name: \"App\",\n  components: {\n    MainLayout\n  },\n  setup() {\n    const RobonomicsProvider = inject(\"RobonomicsProvider\");\n    const IpfsProvider = inject(\"IpfsProvider\");\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    const title = ref();\n\n    store.commit(\"rws/setKey\", process.env.VUE_APP_ROBONOMICS_UI_KEY);\n    store.dispatch(\"rws/init\");\n\n    store.commit(\n      \"rws/setLinkActivate\",\n      router.resolve({ name: \"rwsActivate\" }).path\n    );\n    store.commit(\"rws/setLinkSetup\", router.resolve({ name: \"rwsSetup\" }).path);\n    store.commit(\n      \"rws/setLinkSetupnew\",\n      router.resolve({ name: \"rwsSetupNew\" }).path\n    );\n    store.commit(\n      \"rws/setLinkDevices\",\n      router.resolve({ name: \"telemetry\" }).path\n    );\n    store.commit(\"ipfs/setGateways\", IpfsProvider.gateways);\n\n    watch(route, () => {\n      title.value = route?.meta?.title;\n      const resulttitle = title.value\n        ? `${title.value} / Robonomics Dapp`\n        : \"Robonomics Dapp\";\n      document.title = resulttitle;\n      document\n        .querySelector('meta[property=\"og:title\"]')\n        .setAttribute(\"content\", resulttitle);\n    });\n\n    watch(\n      [route, RobonomicsProvider.isReady],\n      ([route, isReady]) => {\n        if (route.name !== \"telemetry\" && isReady) {\n          store.dispatch(\"app/setlibp2p\", {\n            connected: false\n          });\n          store.dispatch(\"app/setrelay\", {\n            connected: false\n          });\n        }\n      },\n      { immediate: true }\n    );\n\n    return {\n      title\n    };\n  }\n};\n</script>\n","<template>\n  <robo-layout>\n    <dapp-header :title=\"pagetitle\" />\n    <slot />\n  </robo-layout>\n</template>\n\n<script>\nimport DappHeader from \"@/components/Header\";\nimport { useSubscription } from \"@/hooks/useSubscription\";\nimport { watch } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default {\n  components: {\n    DappHeader\n  },\n  props: [\"pagetitle\"],\n  setup() {\n    const store = useStore();\n    const subscription = useSubscription();\n\n    watch(\n      () => store.state.robonomicsUIvue.rws.active,\n      (v) => {\n        subscription.owner.value = v;\n      },\n      { immediate: true }\n    );\n\n    watch(\n      [subscription.owner, subscription.validUntil],\n      () => {\n        store.commit(\"rws/setExpiredate\", subscription.validUntil);\n      },\n      { immediate: true }\n    );\n\n    watch(\n      subscription.devices,\n      (devices) => {\n        store.commit(\"rws/setUsers\", devices);\n      },\n      { immediate: true }\n    );\n  }\n};\n</script>\n","<template>\n  <robo-layout-header\n    logoIcon=\"images/icon_white.svg\"\n    :navigation=\"navigation\"\n    :title=\"title\"\n    :version=\"version\"\n    v-if=\"renderComponent\"\n  />\n</template>\n\n<script>\nimport { fromUnit, round } from \"@/utils/tools\";\nimport axios from \"axios\";\nimport { toRaw } from \"vue\";\n\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: \"Robonomics Dapp\"\n    }\n  },\n  inject: [\"RobonomicsProvider\"],\n  data() {\n    return {\n      renderComponent: true,\n      navigation: [\n        {\n          title: \"Services\",\n          links: [\n            {\n              title: \"Sensors map\",\n              link: \"https://sensors.robonomics.network\",\n              type: \"external\"\n            }\n          ]\n        },\n\n        {\n          title: \"Tokenomics\",\n          links: [\n            {\n              title: \"About XRT\",\n              link: \"https://robonomics.network/xrt/\",\n              type: \"external\"\n            },\n            {\n              title: \"Uniswap\",\n              link: \"https://app.uniswap.org/#/swap?inputCurrency=0x7de91b204c1c737bcee6f000aaa6569cf7061cb7&outputCurrency=0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\",\n              type: \"external\"\n            },\n            {\n              title: \"Basilisk\",\n              link: \"https://app.basilisk.cloud/pools-and-farms\",\n              type: \"external\"\n            }\n          ]\n        },\n\n        {\n          title: \"Tools\",\n          links: [\n            {\n              title: \"Substrate Portal\",\n              link: \"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/explorer\",\n              type: \"external\"\n            },\n            {\n              title: \"Subscan\",\n              link: \"https://robonomics.subscan.io/\",\n              type: \"external\"\n            },\n            {\n              title: \"Polkassembly\",\n              link: \"https://robonomics.polkassembly.io/\",\n              type: \"external\"\n            }\n          ]\n        }\n      ],\n      version: \" \"\n    };\n  },\n  computed: {\n    robonomics: function () {\n      return toRaw(this.RobonomicsProvider.instance.value);\n    }\n  },\n  watch: {\n    \"$store.state.robonomicsUIvue.polkadot.extensionObj\": function (value) {\n      if (\n        value.signer &&\n        value.signer.signRaw &&\n        this.$store.state.robonomicsUIvue.polkadot.address\n      ) {\n        this.handlerAccount(this.$store.state.robonomicsUIvue.polkadot.address);\n      }\n    },\n    \"$store.state.robonomicsUIvue.polkadot.address\": {\n      handler: function (value) {\n        if (\n          value &&\n          this.$store.state.robonomicsUIvue.polkadot.extensionObj.signer &&\n          this.$store.state.robonomicsUIvue.polkadot.extensionObj.signer.signRaw\n        ) {\n          this.handlerAccount(value);\n        }\n      },\n      immediate: true\n    },\n    \"RobonomicsProvider.isReady.value\": {\n      handler: function (newValue, oldValue) {\n        if (newValue && !oldValue) {\n          this.handlerAccount(\n            this.$store.state.robonomicsUIvue.polkadot.address\n          );\n        }\n      },\n      immediate: true\n    },\n    $route: async function () {\n      this.renderComponent = false;\n      await this.$nextTick();\n      this.renderComponent = true;\n    }\n  },\n  async created() {\n    try {\n      const res = await axios.get(\n        \"https://api.github.com/repos/airalab/dapp.robonomics.network/releases/latest\"\n      );\n      if (res.data.tag_name) {\n        this.version = res.data.tag_name;\n      }\n    } catch (_) {\n      console.log(\"dApp version not found.\");\n    }\n  },\n  methods: {\n    async handlerAccount(address) {\n      if (!this.RobonomicsProvider.isReady.value) {\n        return;\n      }\n      if (this.unsubscribeBalance) {\n        this.unsubscribeBalance();\n      }\n      const account = this.$store.state.robonomicsUIvue.polkadot.accounts.find(\n        (item) => item.address === address\n      );\n      if (!account) {\n        return;\n      }\n      if (this.$route.name !== \"telemetry\") {\n        await this.robonomics.accountManager.setSender(address, {\n          type: account.type,\n          extension: this.$store.state.robonomicsUIvue.polkadot.extensionObj\n        });\n      }\n      this.unsubscribeBalance = await this.robonomics.account.getBalance(\n        address,\n        (r) => {\n          const transferable = r.free.sub(r.frozen);\n          this.$store.commit(\n            \"polkadot/setBalanceXRT\",\n            round(\n              fromUnit(\n                transferable,\n                this.robonomics.api.registry.chainDecimals[0]\n              ),\n              4\n            )\n          );\n        }\n      );\n    }\n  }\n};\n</script>\n","import Decimal from \"decimal.js-light\";\n\nDecimal.set({\n  toExpNeg: -31,\n  toExpPos: 31\n});\n\nexport function toDecimal(v) {\n  return new Decimal(v.toString());\n}\n\nexport function round(v, place) {\n  return toDecimal(v).todp(place);\n}\n\nexport function fromUnit(v, decimals = 0, dp) {\n  return toDecimal(v)\n    .div(new Decimal(10).pow(decimals.toString()))\n    .todp(dp)\n    .toString();\n}\n\nexport function toUnit(v, decimals = 0) {\n  return toDecimal(v).mul(new Decimal(10).pow(decimals.toString())).toString();\n}\n\nexport function showVersion() {\n  console.log(\n    \"Build version:\",\n    process.env.VUE_APP_GIT_BRANCH,\n    process.env.VUE_APP_GIT_TAG,\n    process.env.VUE_APP_GIT_SHA\n  );\n}\n","import { render } from \"./Header.vue?vue&type=template&id=f1d08e88\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { inject } from \"vue\";\n\nexport function useRobonomics() {\n  const provider = inject(\"RobonomicsProvider\");\n  return {\n    accountManager: provider.accountManager,\n    isReady: provider.isReady,\n    robonomics: provider.instance,\n    getInstance: () => provider.instance.value\n  };\n}\n","import { validateAddress } from \"@polkadot/util-crypto\";\nimport { onUnmounted, ref, watch } from \"vue\";\nimport { useRobonomics } from \"./useRobonomics\";\n\nexport const useDevices = (initialOwner = null) => {\n  const { isReady, getInstance } = useRobonomics();\n  const owner = ref(initialOwner);\n  const devices = ref([]);\n\n  const getDevices = async (owner) => {\n    if (!isReady.value) {\n      const data = localStorage.getItem(`hadevices:${owner}`);\n      if (data) {\n        try {\n          const parsedData = JSON.parse(data);\n          console.log(\"getDevices cache\");\n          return { data: parsedData.value, cache: true };\n        } catch (error) {\n          console.log(\"hadevices bad\", error);\n        }\n      } else {\n        return { data: [], cache: true };\n      }\n    } else {\n      try {\n        const result = await getInstance().rws.getDevices(owner);\n        const list = result.map((item) => {\n          return item.toHuman();\n        });\n        localStorage.setItem(\n          `hadevices:${owner}`,\n          JSON.stringify({ time: Date.now(), value: list })\n        );\n        console.log(\"getDevices chain\");\n        return { data: list, cache: false };\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    return { data: [], cache: false };\n  };\n\n  const loadDevices = async () => {\n    if (owner.value) {\n      try {\n        validateAddress(owner.value);\n        const result = await getDevices(owner.value);\n        devices.value = result.data;\n        if (result.cache) {\n          const stop = watch(\n            isReady,\n            async () => {\n              if (isReady.value) {\n                const result = await getDevices(owner.value);\n                devices.value = result.data;\n                stop();\n              }\n            },\n            { immediate: true }\n          );\n        }\n        return;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    devices.value = [];\n  };\n\n  watch(\n    owner,\n    async () => {\n      await loadDevices();\n    },\n    {\n      immediate: true\n    }\n  );\n\n  watch(\n    isReady,\n    async (isReady) => {\n      if (isReady) {\n        const unsubscribe = await getInstance().events.on(\n          { section: \"rws\", method: \"NewDevices\" },\n          async (result) => {\n            for (const event of result) {\n              if (event.data[0].toHuman() === owner.value) {\n                await loadDevices();\n              }\n            }\n          }\n        );\n        onUnmounted(unsubscribe);\n      }\n    },\n    { immediate: true }\n  );\n\n  return {\n    owner,\n    devices,\n    loadDevices\n  };\n};\n","import { createType, TypeRegistry } from \"@polkadot/types\";\nimport { validateAddress } from \"@polkadot/util-crypto\";\nimport { computed, ref, shallowRef, watch } from \"vue\";\nimport { useDevices } from \"./useDevices\";\nimport { useRobonomics } from \"./useRobonomics\";\n\nconst getRegistry = () => {\n  const registry = new TypeRegistry();\n  const types = {\n    PalletRobonomicsRwsSubscription: {\n      _enum: {\n        Lifetime: {\n          tps: \"Compact<u32>\"\n        },\n        Daily: {\n          days: \"Compact<u32>\"\n        }\n      }\n    },\n    PalletRobonomicsRwsSubscriptionLedger: {\n      freeWeight: \"Compact<u64>\",\n      issueTime: \"Compact<u64>\",\n      lastUpdate: \"Compact<u64>\",\n      kind: {\n        _enum: {\n          Lifetime: {\n            tps: \"Compact<u32>\"\n          },\n          Daily: {\n            days: \"Compact<u32>\"\n          }\n        }\n      }\n    }\n  };\n  registry.register(types);\n  return registry;\n};\n\nexport const useSubscription = (initialOwner = null) => {\n  const owner = ref(initialOwner);\n  const dataRaw = shallowRef(null);\n\n  const { isReady, getInstance } = useRobonomics();\n  const { devices, loadDevices } = useDevices(owner);\n\n  const getReferenceCallWeight = () => {\n    return getInstance().api.consts.rws.referenceCallWeight;\n  };\n\n  const getLedger = async (owner) => {\n    if (!isReady.value) {\n      const data = localStorage.getItem(`hasubscription:${owner}`);\n      if (data) {\n        try {\n          const parsedData = JSON.parse(data);\n          // if (parsedData.time + DAYS_TO_MS > Date.now()) {\n          const res = createType(\n            getRegistry(),\n            \"Option<PalletRobonomicsRwsSubscriptionLedger>\",\n            parsedData.value\n          );\n          console.log(\"getLedger cache\");\n          return { data: res.value, cache: true };\n          // }\n        } catch (error) {\n          console.log(\"hasubscription bad\", error);\n        }\n      } else {\n        return { data: undefined, cache: true };\n      }\n    } else {\n      const res = await getInstance().rws.getLedger(owner);\n      if (!res.isEmpty) {\n        localStorage.setItem(\n          `hasubscription:${owner}`,\n          JSON.stringify({ time: Date.now(), value: res.value.toJSON() })\n        );\n        console.log(\"getLedger chain\");\n        return { data: res.value, cache: false };\n      }\n    }\n    return { data: undefined, cache: false };\n  };\n\n  const DAYS_TO_MS = 24 * 60 * 60 * 1000;\n\n  const getFreeWeightCalc = async (owner) => {\n    const ledger = await getLedger(owner);\n    if (!ledger) {\n      return -1;\n    }\n\n    const freeWeight = ledger.freeWeight.toNumber();\n    const lastUpdate = ledger.lastUpdate.toNumber();\n    const issueTime = ledger.issueTime.toNumber();\n\n    const referenceCallWeight = getReferenceCallWeight();\n    const now = Date.now();\n\n    let utps = (() => {\n      let tps;\n      if (ledger.kind.isLifetime) {\n        tps = ledger.kind.value.tps.toNumber();\n      } else {\n        const days = ledger.kind.value.days.toNumber();\n        const duration_ms = days * DAYS_TO_MS;\n        if (now < issueTime + duration_ms) {\n          tps = 10000;\n        } else {\n          tps = 0;\n        }\n      }\n      return tps;\n    })();\n\n    const delta = now - lastUpdate;\n    return Math.floor(\n      freeWeight + (referenceCallWeight * utps * delta) / 1000000000\n    );\n  };\n\n  const validUntil = computed(() => {\n    if (dataRaw.value === null) {\n      return null;\n    }\n    if (dataRaw.value.kind.isLifetime) {\n      return null;\n    }\n    const issue_time = dataRaw.value.issueTime.toNumber();\n    let days = 0;\n    if (dataRaw.value.kind.isDaily) {\n      days = dataRaw.value.kind.value.days.toNumber();\n    }\n    return issue_time + days * DAYS_TO_MS;\n  });\n\n  const countMonth = computed(() => {\n    if (dataRaw.value === null) {\n      return 0;\n    }\n    let days = 0;\n    if (dataRaw.value.kind.isDaily) {\n      days = dataRaw.value.kind.value.days.toNumber();\n    }\n    return days / 30;\n  });\n\n  const isActive = computed(() => {\n    if (\n      dataRaw.value === null ||\n      (validUntil.value !== null && Date.now() > validUntil.value)\n    ) {\n      return false;\n    }\n    return true;\n  });\n\n  const hasSubscription = computed(() => {\n    return dataRaw.value !== null;\n  });\n\n  const loadLedger = async () => {\n    if (owner.value) {\n      try {\n        validateAddress(owner.value);\n        const result = await getLedger(owner.value);\n        dataRaw.value = result.data;\n        if (result.cache) {\n          const stop = watch(\n            isReady,\n            async () => {\n              if (isReady.value) {\n                const result = await getLedger(owner.value);\n                dataRaw.value = result.data;\n                stop();\n              }\n            },\n            { immediate: true }\n          );\n        }\n        // eslint-disable-next-line no-empty\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    dataRaw.value = null;\n  };\n\n  watch(\n    owner,\n    async () => {\n      await loadLedger();\n    },\n    {\n      immediate: true\n    }\n  );\n\n  return {\n    owner,\n    dataRaw,\n    hasSubscription,\n    isActive,\n    countMonth,\n    validUntil,\n    loadLedger,\n    devices,\n    loadDevices,\n    getFreeWeightCalc\n  };\n};\n","import { render } from \"./Main.vue?vue&type=template&id=165220bb\"\nimport script from \"./Main.vue?vue&type=script&lang=js\"\nexport * from \"./Main.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=7d550e06\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// import { Buffer } from \"buffer\";\nimport axios from \"axios\";\nimport { create } from \"ipfs-http-client\";\nimport { ref } from \"vue\";\n\nclass IpfsApiClient {\n  constructor(endpoint) {\n    this.endpoint = endpoint;\n    this.authHeader = null;\n    this.robonomics = null;\n    this._create();\n  }\n  _create() {\n    this.client = create({\n      ...this._options()\n    });\n  }\n  _options() {\n    return {\n      url: this.endpoint,\n      headers: {\n        authorization: `Basic ${this.authHeader}`,\n        robonomics: this.robonomics\n      }\n    };\n  }\n  isAuth() {\n    return !!this.authHeader && !!this.robonomics;\n  }\n  auth(owner, address, signature) {\n    const authHeaderRaw = `sub-${address}:${signature}`;\n    this.authHeader = Buffer.from(authHeaderRaw).toString(\"base64\");\n    this.robonomics = owner;\n    this._create();\n  }\n  authClear() {\n    this.authHeader = null;\n    this.robonomics = null;\n    this._create();\n  }\n  async ls(cid) {\n    const files = [];\n    for await (const file of this.client.ls(cid)) {\n      if (file.type === \"file\") {\n        files.push(file);\n      }\n    }\n    return files;\n  }\n  async cat(cid) {\n    const cat = async (cid) => {\n      const decoder = new TextDecoder();\n      let content = \"\";\n      for await (const chunk of this.client.cat(cid)) {\n        content += decoder.decode(chunk, {\n          stream: true\n        });\n      }\n      return content;\n    };\n    return await cat(cid);\n  }\n  async add(data) {\n    return await this.client.add(data);\n  }\n  async catViaGateway(gateway, cid, attempts = 5) {\n    for (let index = 1; index <= attempts; index++) {\n      try {\n        return (await axios.get(`${gateway}${cid}`)).data;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    throw new Error(\"File not available\");\n  }\n  async catViaGateways(gateways, cid) {\n    for (const gateway of gateways) {\n      try {\n        return {\n          gateway,\n          result: await this.catViaGateway(gateway, cid)\n        };\n      } catch (error) {\n        console.log(error.message);\n      }\n    }\n    throw new Error(\"File not available\");\n  }\n}\n\nexport default {\n  install: (app, params) => {\n    const instance = ref();\n    app.provide(\"IpfsProvider\", {\n      instance,\n      gateways: params.gateways || []\n    });\n    instance.value = new IpfsApiClient(params.api.gateway);\n  }\n};\n","import { u8aConcat, u8aToU8a } from \"@polkadot/util\";\nimport {\n  ed25519PairFromSeed,\n  encodeAddress,\n  mnemonicToMiniSecret,\n  randomAsU8a\n} from \"@polkadot/util-crypto\";\nimport ed2curve from \"ed2curve\";\nimport nacl from \"tweetnacl\";\n\nfunction naclOpen(sealed, nonce, senderBoxPublic, receiverBoxSecret) {\n  return (\n    nacl.box.open(sealed, nonce, senderBoxPublic, receiverBoxSecret) || null\n  );\n}\nfunction naclSeal(\n  message,\n  senderBoxSecret,\n  receiverBoxPublic,\n  nonce = randomAsU8a(24)\n) {\n  return {\n    nonce,\n    sealed: nacl.box(message, nonce, receiverBoxPublic, senderBoxSecret)\n  };\n}\nfunction convertSecretKeyToCurve25519(secretKey) {\n  return ed2curve.convertSecretKey(secretKey);\n}\nfunction convertPublicKeyToCurve25519(publicKey) {\n  return ed2curve.convertPublicKey(publicKey);\n}\nexport function decryptMessage(\n  encryptedMessageWithNonce,\n  senderPublicKey,\n  secretKey\n) {\n  const messageU8a = u8aToU8a(encryptedMessageWithNonce);\n  return naclOpen(\n    messageU8a.slice(24, messageU8a.length),\n    messageU8a.slice(0, 24),\n    convertPublicKeyToCurve25519(u8aToU8a(senderPublicKey)),\n    convertSecretKeyToCurve25519(secretKey)\n  );\n}\nexport function encryptMessage(\n  message,\n  recipientPublicKey,\n  secretKey,\n  nonceIn\n) {\n  const { nonce, sealed } = naclSeal(\n    u8aToU8a(message),\n    convertSecretKeyToCurve25519(secretKey),\n    convertPublicKeyToCurve25519(u8aToU8a(recipientPublicKey)),\n    nonceIn\n  );\n  return u8aConcat(nonce, sealed);\n}\nexport function createPair(mnemonic) {\n  const seed = mnemonicToMiniSecret(mnemonic);\n  const pair = ed25519PairFromSeed(seed);\n  return pair;\n}\nexport function encryptor(pair) {\n  return {\n    pair,\n    address: encodeAddress(pair.publicKey, 32),\n    encodeAddress: (ss58Format = 32) => {\n      return encodeAddress(pair.publicKey, ss58Format);\n    },\n    decryptMessage: (encryptedMessageWithNonce, senderPublicKey) => {\n      return decryptMessage(\n        encryptedMessageWithNonce,\n        senderPublicKey,\n        pair.secretKey\n      );\n    },\n    encryptMessage: (message, recipientPublicKey, nonce) => {\n      return encryptMessage(message, recipientPublicKey, pair.secretKey, nonce);\n    }\n  };\n}\n// export function encryptor(mnemonic) {\n//   const pair = createPair(mnemonic);\n//   return {\n//     pair,\n//     address: encodeAddress(pair.publicKey, 32),\n//     encodeAddress: (ss58Format = 32) => {\n//       return encodeAddress(pair.publicKey, ss58Format);\n//     },\n//     decryptMessage: (encryptedMessageWithNonce, senderPublicKey) => {\n//       return decryptMessage(\n//         encryptedMessageWithNonce,\n//         senderPublicKey,\n//         pair.secretKey\n//       );\n//     },\n//     encryptMessage: (message, recipientPublicKey, nonce) => {\n//       return encryptMessage(message, recipientPublicKey, pair.secretKey, nonce);\n//     }\n//   };\n// }\n","import { encryptor } from \"@/utils/encryptor\";\nimport { decodePair } from \"@polkadot/keyring/pair/decode\";\nimport { u8aToHex, u8aWrapBytes } from \"@polkadot/util\";\nimport { base64Decode } from \"@polkadot/util-crypto\";\nimport { AccountManager } from \"robonomics-interface\";\n\nexport default class AccountManagerDapp extends AccountManager {\n  constructor(keyring, config = {}, api = null) {\n    super(keyring, api);\n    this.extension = null;\n    keyring.loadAll(config);\n    this.setReady(true);\n  }\n\n  async beforeSetSender(address, { type, extension }) {\n    // if (this.account && !this.account.meta.isInjected) {\n    //   // this.keyring.forgetAccount(this.account.address);\n    //   this.account.lock();\n    // }\n    this.extension = extension;\n    try {\n      this.keyring.getPair(address);\n      // eslint-disable-next-line no-empty\n    } catch (_) {\n      this.keyring.loadInjected(address, {}, type);\n    }\n  }\n\n  async afterSetSender() {\n    await super.afterSetSender();\n    if (this.account.meta.isInjected && this.extension) {\n      this.api.setSigner(this.extension.signer);\n      this.account.signMsg = async (data) => {\n        return (\n          await this.extension.signer.signRaw({\n            address: this.account.address,\n            data: u8aToHex(u8aWrapBytes(data)),\n            type: \"bytes\"\n          })\n        ).signature;\n      };\n    }\n  }\n\n  async addUri(suri, meta = {}, type = \"ed25519\") {\n    const pair = this.keyring.keyring.addFromUri(suri, meta, type);\n    return await this.setSender(pair.address, {\n      type: type\n    });\n  }\n\n  async addUriPassword(\n    suri,\n    password = undefined,\n    meta = {},\n    type = \"ed25519\"\n  ) {\n    const { pair } = this.keyring.addUri(suri, password, meta, type);\n    return await this.setSender(pair.address, {\n      type: type\n    });\n  }\n\n  async addJsonPassword(json, password) {\n    const pair = this.keyring.createFromJson(json);\n    this.keyring.addPair(pair, password);\n    return await this.setSender(pair.address, {\n      type: pair.type\n    });\n  }\n\n  async addPair(pairKey) {\n    const pair = this.keyring.keyring.addFromPair(pairKey);\n    return await this.setSender(pair.address, {\n      type: pair.type\n    });\n  }\n\n  encryptor(password = null) {\n    if (!this.account.meta.isInjected && this.account.type === \"ed25519\") {\n      const json = this.account.toJson(password);\n      const decoded = decodePair(\n        password,\n        base64Decode(json.encoded),\n        json.encoding.type\n      );\n      return encryptor(decoded);\n    }\n  }\n}\n","import keyring from \"@polkadot/ui-keyring\";\nimport { Robonomics } from \"robonomics-interface\";\nimport { ref, shallowRef } from \"vue\";\nimport AccountManager from \"./robonomicsAccountManager\";\n\nexport default {\n  install: async (app, params) => {\n    const isReady = ref(false);\n    const instance = shallowRef();\n    const accountManager = new AccountManager(keyring);\n    app.provide(\"RobonomicsProvider\", {\n      isReady,\n      instance,\n      accountManager\n    });\n    instance.value = await Robonomics.createInstance(params);\n    instance.value.setAccountManager(accountManager);\n    isReady.value = true;\n  }\n};\n","<template>\n  <robo-layout-section width=\"middle-wide\">\n    <robo-grid offset=\"x0\" minColumnWidth=\"200px\">\n      <robo-section offset=\"x0\">\n        <robo-card>\n          <template v-if=\"rwsactive && rwsactive !== ''\">\n            <robo-template-rws-active />\n          </template>\n          <template v-else>\n            <robo-text title=\"4\" align=\"left\">RWS subscription</robo-text>\n            <robo-section offset=\"x1\">\n              <robo-text size=\"small\" weight=\"normal-italic\">\n                <robo-grid offset=\"x0\" gap=\"x05\" columns=\"1\">\n                  <robo-grid-item borderbottom>\n                    Price from: <b>~ {{ price }} XRT </b>\n\n                    <robo-details>\n                      <template #summary>\n                        <robo-icon icon=\"circle-question\" />\n                      </template>\n                      <robo-grid offset=\"x0\" gap=\"x05\">\n                        <robo-text weight=\"bold\">Where to buy XRT</robo-text>\n                        <robo-link href=\"https://app.basilisk.cloud/trade\">\n                          Basilisk\n                        </robo-link>\n                        <robo-link\n                          href=\"https://app.solarbeam.io/exchange/swap\"\n                        >\n                          Solarbeam\n                        </robo-link>\n                        <robo-link\n                          href=\"https://trade.kraken.com/markets/kraken/xrt/usd\"\n                        >\n                          Kraken\n                        </robo-link>\n                      </robo-grid>\n                    </robo-details>\n                  </robo-grid-item>\n\n                  <robo-grid-item borderbottom>\n                    Activation time <b>~ 2 min</b>\n                  </robo-grid-item>\n\n                  <robo-grid-item>\n                    Available subscriptions:\n                    <b>{{ freeAuctions }}</b>\n                  </robo-grid-item>\n                </robo-grid>\n              </robo-text>\n            </robo-section>\n\n            <robo-button :router=\"linkActivate\" size=\"small\">\n              <robo-icon icon=\"wallet\" /> Buy a subscription\n            </robo-button>\n          </template>\n        </robo-card>\n      </robo-section>\n\n      <robo-section offset=\"x0\">\n        <robo-text title=\"4\" align=\"left\">What you get with RWS</robo-text>\n        <robo-text size=\"small\" weight=\"normal-italic\">\n          <robo-grid offset=\"x0\" gap=\"x05\" columns=\"1\">\n            <robo-grid-item borderbottom>\n              <robo-icon icon=\"check\" /> Brand-independent smart home\n            </robo-grid-item>\n            <robo-grid-item borderbottom>\n              <robo-icon icon=\"check\" /> Secured data, only you have access\n            </robo-grid-item>\n            <robo-grid-item borderbottom>\n              <robo-icon icon=\"check\" /> Remote control without corporate clouds\n            </robo-grid-item>\n            <robo-grid-item>\n              <robo-icon icon=\"check\" /> Home assistant integration\n            </robo-grid-item>\n          </robo-grid>\n        </robo-text>\n      </robo-section>\n\n      <robo-section offset=\"x0\">\n        <robo-text title=\"4\" align=\"left\">What is RWS</robo-text>\n        <robo-text weight=\"normal-italic\" size=\"small\" offset=\"x1\">\n          Robonomics Web Services (RWS) is a smart home integration that enables\n          secure interaction with smart devices and robots through transactions\n          on the Robonomics parachain, rather than relying on centralized cloud\n          services.\n        </robo-text>\n        <robo-text weight=\"normal-italic\" size=\"small\" offset=\"x1\">\n          An RWS subscription ensures stable transaction processing with every\n          block, making it an ideal choice for those who wish to receive data\n          from devices and remotely manage them.\n        </robo-text>\n        <robo-text weight=\"normal-italic\" size=\"small\" offset=\"x1\">\n          Easy to start for Home Assistant users.\n          <robo-link\n            href=\"https://wiki.robonomics.network/docs/hass-image-install/#hardware-you-need-for-installation\"\n          >\n            Guide to start\n          </robo-link>\n        </robo-text>\n      </robo-section>\n    </robo-grid>\n  </robo-layout-section>\n\n  <robo-layout-section>\n    <robo-grid id=\"home-links\" offset=\"x0\" :columns=\"3\" gap=\"x05\">\n      <robo-link href=\"https://www.youtube.com/watch?v=onMv_An8h2Q\">\n        <span>What is Robonomics</span>\n      </robo-link>\n      <robo-link href=\"https://wiki.robonomics.network\">\n        <span>Step-by-step tutorials</span>\n      </robo-link>\n      <robo-link href=\"https://robonomics.academy\">\n        <span>Advanced cources</span>\n      </robo-link>\n    </robo-grid>\n  </robo-layout-section>\n</template>\n\n<script>\nimport { useRobonomics } from \"@/hooks/useRobonomics\";\nimport { fromUnit } from \"@/utils/tools\";\nimport { bnToBn } from \"@polkadot/util\";\nimport { computed, onUnmounted, ref, watch } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default {\n  setup() {\n    const price = ref(0);\n    const freeAuctions = ref(0);\n    let unsubscribeBlock = null;\n\n    const store = useStore();\n    const rwsactive = computed(() => {\n      return store.state.robonomicsUIvue.rws.active;\n    });\n    const linkActivate = computed(() => {\n      return store.state.robonomicsUIvue.rws.links.activate;\n    });\n\n    const { isReady, getInstance } = useRobonomics();\n\n    watch(\n      isReady,\n      async (isReady) => {\n        if (isReady) {\n          const robonomics = getInstance();\n          freeAuctions.value = (await robonomics.rws.getAuctionQueue()).length;\n          unsubscribeBlock = await robonomics.events.onBlock(async () => {\n            freeAuctions.value = (\n              await robonomics.rws.getAuctionQueue()\n            ).length;\n          });\n          const minimalBid = await robonomics.rws.getMinimalBid();\n          price.value = minimalBid.add(bnToBn(1));\n        }\n      },\n      { immediate: true }\n    );\n\n    onUnmounted(() => {\n      if (unsubscribeBlock) {\n        unsubscribeBlock();\n      }\n    });\n\n    const priceFormat = computed(() => {\n      if (isReady.value) {\n        return fromUnit(\n          price.value,\n          getInstance().api.registry.chainDecimals[0],\n          0\n        );\n      }\n      return 0;\n    });\n\n    return {\n      rwsactive,\n      linkActivate,\n      freeAuctions,\n      price: priceFormat\n    };\n  }\n};\n</script>\n\n<style>\n#home-links .robo-link {\n  position: relative;\n  display: block;\n  background-color: var(--robo-color-blue-80);\n  min-height: 150px;\n  color: var(--robo-color-light);\n  padding: var(--robo-space);\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\n#home-links .robo-link:before {\n  content: \"\";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 15px;\n  background-color: var(--robo-color-blue);\n  z-index: 1;\n  transition: 0.2s all;\n}\n\n#home-links .robo-link:hover::before {\n  height: 100%;\n}\n\n#home-links .robo-link span {\n  display: block;\n  margin-top: 30px;\n  position: relative;\n  z-index: 2;\n}\n</style>\n","import { render } from \"./Home.vue?vue&type=template&id=538cf8fc\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=538cf8fc&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nexport default {\n  created: function () {\n    window.location.href = `https://v0.dapp.robonomics.network/${this.$route.href}`;\n  }\n};\n</script>\n","import script from \"./PathNotFound.vue?vue&type=script&lang=js\"\nexport * from \"./PathNotFound.vue?vue&type=script&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <robo-layout-section>\n    <robo-template-rws-buy\n      :price=\"price\"\n      activationtime=\"2\"\n      :available=\"freeAuctions\"\n      :chainInfoUploaded=\"chainInfoStatus\"\n      :rwsExpiration=\"expiredate\"\n      @on-activate=\"onActivate\"\n    />\n  </robo-layout-section>\n</template>\n\n<script>\nimport { useAccount } from \"@/hooks/useAccount\";\nimport { useBalance } from \"@/hooks/useBalance\";\nimport { useDevices } from \"@/hooks/useDevices\";\nimport { useRobonomics } from \"@/hooks/useRobonomics\";\nimport { useSend } from \"@/hooks/useSend\";\nimport { useSubscription } from \"@/hooks/useSubscription\";\nimport { fromUnit } from \"@/utils/tools\";\nimport { bnToBn } from \"@polkadot/util\";\nimport { computed, onUnmounted, ref, watch, watchEffect } from \"vue\";\n\nexport default {\n  setup() {\n    const price = ref(0);\n    const freeAuctions = ref(0);\n    const chainInfoStatus = ref(false);\n    let unsubscribeBlock = null;\n\n    const { isReady, getInstance } = useRobonomics();\n    const { account, unsubscribe: unsubscribeAccount } = useAccount();\n    const { balance, unsubscribe: unsubscribeBalance } = useBalance(account);\n    const subscription = useSubscription(account);\n    const devices = useDevices(account);\n\n    watch(\n      isReady,\n      async (isReady) => {\n        if (isReady) {\n          const robonomics = getInstance();\n          freeAuctions.value = (await robonomics.rws.getAuctionQueue()).length;\n          unsubscribeBlock = await robonomics.events.onBlock(async () => {\n            freeAuctions.value = (\n              await robonomics.rws.getAuctionQueue()\n            ).length;\n          });\n\n          const minimalBid = await robonomics.rws.getMinimalBid();\n          price.value = minimalBid.add(bnToBn(1));\n          chainInfoStatus.value = true;\n        }\n      },\n      { immediate: true }\n    );\n\n    onUnmounted(() => {\n      if (unsubscribeBlock) {\n        unsubscribeBlock();\n      }\n      if (unsubscribeBalance) {\n        unsubscribeBalance();\n      }\n      unsubscribeAccount();\n    });\n\n    const transaction = useSend();\n    const onActivate = async (setStatus) => {\n      if (!isReady.value) {\n        setStatus(\"error\", \"Parachain is not ready.\");\n        return;\n      }\n      if (\n        !balance.value ||\n        bnToBn(balance.value).lt(price.value.add(bnToBn(10000000)))\n      ) {\n        setStatus(\n          \"error\",\n          \"Subscription can not be activated due to unsuffcicient XRT balance\"\n        );\n        return;\n      }\n      if (freeAuctions.value <= 0) {\n        setStatus(\"error\", \"There are no available subscriptions\");\n        return;\n      }\n      if (subscription.hasSubscription.value && subscription.isActive.value) {\n        setStatus(\"error\", \"You have an active subscription\");\n        return;\n      }\n\n      const robonomics = getInstance();\n      let call = robonomics.rws.bid(\n        Number(await robonomics.rws.getFirtsFreeAuction()),\n        price.value\n      );\n      if (!devices.devices.value.includes(account.value)) {\n        call = robonomics.api.tx.utility.batch([\n          call,\n          robonomics.rws.setDevices([...devices.devices.value, account.value])\n        ]);\n      }\n      const tx = transaction.createTx();\n      await transaction.send(tx, call);\n      if (tx.error.value) {\n        if (tx.error.value !== \"Cancelled\") {\n          setStatus(\"error\", tx.error.value);\n        } else {\n          setStatus(\"cancel\");\n        }\n        return;\n      }\n\n      const unsubscribeBlock = await robonomics.events.onBlock(() => {\n        subscription.loadLedger();\n      });\n      const stopWatchEffect = watchEffect(() => {\n        if (subscription.hasSubscription.value && subscription.isActive.value) {\n          stopWatchEffect();\n          unsubscribeBlock();\n          setStatus(\"ok\");\n        }\n      });\n    };\n\n    const priceFormat = computed(() => {\n      if (isReady.value) {\n        return fromUnit(\n          price.value,\n          getInstance().api.registry.chainDecimals[0],\n          0\n        );\n      }\n      return 0;\n    });\n\n    return {\n      freeAuctions,\n      price: priceFormat,\n      expiredate: subscription.validUntil,\n      chainInfoStatus,\n      onActivate\n    };\n  }\n};\n</script>\n","import { ref } from \"vue\";\nimport { useRobonomics } from \"./useRobonomics\";\n\nexport const useAccount = () => {\n  const account = ref(null);\n  const { accountManager } = useRobonomics();\n  if (accountManager.account) {\n    account.value = accountManager.account.address;\n  }\n  const unsubscribe = accountManager.onChange((res) => {\n    account.value = res.address;\n  });\n  return { account, unsubscribe };\n};\n","import { ref, watch } from \"vue\";\nimport { useRobonomics } from \"./useRobonomics\";\n\nexport const useBalance = (account) => {\n  const balance = ref(null);\n  const { isReady, getInstance } = useRobonomics();\n  let unsubscribe;\n  watch([account, isReady], async () => {\n    if (unsubscribe) {\n      unsubscribe();\n    }\n    if (!isReady.value) {\n      return;\n    }\n    const robonomics = getInstance();\n    unsubscribe = await robonomics.account.getBalance(account.value, (r) => {\n      balance.value = r.free.sub(r.frozen).toNumber();\n    });\n  });\n  return { balance, unsubscribe };\n};\n","import { ref } from \"vue\";\nimport { useRobonomics } from \"./useRobonomics\";\nimport { useSubscription } from \"./useSubscription\";\n\nexport const useSend = () => {\n  const { isReady, getInstance, accountManager } = useRobonomics();\n  const { getFreeWeightCalc } = useSubscription();\n\n  const getCallWeight = async (tx, signer) => {\n    if (!signer) {\n      if (accountManager.account) {\n        signer = accountManager.account.address;\n      } else {\n        throw new Error(\"Signer required\");\n      }\n    }\n    return (await tx.paymentInfo(signer)).weight.toNumber();\n  };\n\n  const checkWeight = async (tx, owner) => {\n    const freeWeightCalc = await getFreeWeightCalc(owner);\n    if (freeWeightCalc < 0) {\n      throw new Error(`Not found ledger ${owner}`);\n    }\n    const callWeight = await getCallWeight(tx);\n    if (callWeight > freeWeightCalc) {\n      throw new Error(\n        `The origin account have no enough free weight to process these call. Call weight ${callWeight}, Free weight ${freeWeightCalc}`\n      );\n    }\n  };\n\n  const createTx = () => {\n    const result = ref(null);\n    const error = ref(null);\n    const process = ref(false);\n    return { error, process, result };\n  };\n\n  const send = async (tx, call, subscription = false) => {\n    tx.result.value = null;\n    tx.error.value = null;\n    tx.process.value = true;\n    if (!isReady.value) {\n      tx.error.value = \"Robonomics is not ready\";\n      tx.process.value = false;\n      return;\n    }\n    const robonomics = getInstance();\n    try {\n      if (subscription) {\n        await checkWeight(call, subscription);\n        robonomics.accountManager.useSubscription(subscription);\n      }\n      const nonce = await robonomics.api.rpc.system.accountNextIndex(\n        robonomics.accountManager.account.address\n      );\n      tx.result.value = await robonomics.accountManager.signAndSend(call, {\n        nonce\n      });\n      console.log(\"tx\", tx.result.value.block, tx.result.value.tx);\n    } catch (e) {\n      console.log(e);\n      tx.error.value = e.message;\n    }\n    tx.process.value = false;\n    if (subscription) {\n      robonomics.accountManager.useSubscription(false);\n    }\n    return tx.result;\n  };\n\n  return { createTx, send };\n};\n","import { render } from \"./RwsActivate.vue?vue&type=template&id=51eac7f6\"\nimport script from \"./RwsActivate.vue?vue&type=script&lang=js\"\nexport * from \"./RwsActivate.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <robo-layout-section>\n    <robo-template-rws-setup\n      :onRwsUpdate=\"rwsUpdateActions\"\n      :onUserDelete=\"removeUser\"\n      :onUserAdd=\"addUser\"\n      :onSaveHapass=\"saveHapass\"\n    />\n  </robo-layout-section>\n</template>\n\n<script>\nimport { useAccount } from \"@/hooks/useAccount\";\nimport { useDevices } from \"@/hooks/useDevices\";\nimport { useRobonomics } from \"@/hooks/useRobonomics\";\nimport { useSend } from \"@/hooks/useSend\";\nimport { u8aToHex } from \"@polkadot/util\";\nimport { decodeAddress, encodeAddress } from \"@polkadot/util-crypto\";\nimport { computed } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default {\n  setup() {\n    const store = useStore();\n\n    const setupOwner = computed(() => {\n      return store.state.robonomicsUIvue.rws.active;\n    });\n\n    const { isReady, getInstance } = useRobonomics();\n    const transaction = useSend();\n    const devices = useDevices(setupOwner);\n    const { account } = useAccount();\n\n    const rwsUpdateActions = (rws, setStatus) => {\n      if (!rws.owner || !rws.name || !rws.controller) {\n        setStatus(\"error\", \"All fields are required\");\n        return;\n      }\n\n      try {\n        encodeAddress(rws.owner);\n      } catch (error) {\n        setStatus(\"error\", `Owner: ${error.message}`);\n        return;\n      }\n      try {\n        encodeAddress(rws.controller);\n      } catch (error) {\n        setStatus(\"error\", `Controller: ${error.message}`);\n        return;\n      }\n\n      setStatus(\"ok\");\n    };\n\n    const addUser = async (user, setStatus) => {\n      if (!isReady.value) {\n        setStatus(\"error\", \"Parachain is not ready.\");\n        return;\n      }\n      if (setupOwner.value && setupOwner.value !== account.value) {\n        setStatus(\"error\", \"You do not have access to this action.\");\n        return;\n      }\n\n      if (!devices.devices.value.includes(user)) {\n        const call = await getInstance().rws.setDevices([\n          ...devices.devices.value,\n          user\n        ]);\n        const tx = transaction.createTx();\n        if (devices.devices.value.includes(account.value)) {\n          await transaction.send(tx, call, setupOwner.value);\n        } else {\n          await transaction.send(tx, call);\n        }\n        if (tx.error.value) {\n          if (tx.error.value !== \"Cancelled\") {\n            setStatus(\"error\", tx.error.value);\n          } else {\n            setStatus(\"cancel\");\n          }\n          return;\n        } else {\n          await devices.loadDevices();\n        }\n      }\n      store.commit(\"rws/setUsers\", devices.devices);\n      setStatus(\"ok\");\n    };\n\n    const removeUser = async (user, setStatus) => {\n      if (!isReady.value) {\n        setStatus(\"error\", \"Parachain is not ready.\");\n        return;\n      }\n      if (setupOwner.value && setupOwner.value !== account.value) {\n        setStatus(\"error\", \"You do not have access to this action.\");\n        return;\n      }\n      if (devices.devices.value.includes(user)) {\n        const call = await getInstance().rws.setDevices(\n          devices.devices.value.filter((item) => item !== user)\n        );\n        const tx = transaction.createTx();\n        if (devices.devices.value.includes(account.value)) {\n          await transaction.send(tx, call, setupOwner.value);\n        } else {\n          await transaction.send(tx, call);\n        }\n        if (tx.error.value) {\n          if (tx.error.value !== \"Cancelled\") {\n            setStatus(\"error\", tx.error.value);\n          } else {\n            setStatus(\"cancel\");\n          }\n          return;\n        } else {\n          await devices.loadDevices();\n        }\n      }\n      store.commit(\"rws/setUsers\", devices.devices);\n      setStatus(\"ok\");\n    };\n\n    const saveHapass = async (passToSave, setStatus) => {\n      if (!isReady.value) {\n        setStatus(\"error\", \"Parachain is not ready.\");\n        return;\n      }\n      const userAddress = store.state.robonomicsUIvue.rws.user.account;\n\n      const robonomics = getInstance();\n\n      await robonomics.accountManager.addPair(\n        store.state.robonomicsUIvue.rws.user.key\n      );\n      const user = robonomics.accountManager.encryptor();\n\n      try {\n        encodeAddress(userAddress);\n      } catch (error) {\n        setStatus(\"error\", error.message);\n        return;\n      }\n\n      const encodedDevices = devices.devices.value.map((item) =>\n        encodeAddress(item)\n      );\n      if (!encodedDevices.includes(encodeAddress(userAddress))) {\n        setStatus(\"error\", \"User not found in subscription\");\n        return;\n      }\n\n      const setup = store.state.robonomicsUIvue.rws.list.find(\n        (item) => item.owner === setupOwner.value\n      );\n\n      const passwordForAdmin = user.encryptMessage(\n        passToSave,\n        decodeAddress(setup.controller)\n      );\n\n      const passwordForRecovery = user.encryptMessage(\n        passToSave,\n        decodeAddress(userAddress)\n      );\n\n      const call = await robonomics.datalog.write(\n        JSON.stringify({\n          subscription: setup.owner,\n          ha: setup.controller,\n          admin: u8aToHex(passwordForAdmin),\n          user: u8aToHex(passwordForRecovery)\n        })\n      );\n      const tx = transaction.createTx();\n      await transaction.send(tx, call, setup.owner);\n\n      const accountOld = store.state.robonomicsUIvue.polkadot.accounts.find(\n        (item) => item.address === store.state.robonomicsUIvue.polkadot.address\n      );\n      if (accountOld) {\n        await robonomics.accountManager.setSender(accountOld.address, {\n          type: accountOld.type,\n          extension: store.state.robonomicsUIvue.polkadot.extensionObj\n        });\n      }\n\n      if (tx.error.value) {\n        if (tx.error.value !== \"Cancelled\") {\n          setStatus(\"error\", tx.error.value);\n        } else {\n          setStatus(\"cancel\");\n        }\n        return;\n      }\n\n      setStatus(\"ok\");\n    };\n\n    return {\n      saveHapass,\n      rwsUpdateActions,\n      addUser,\n      removeUser\n    };\n  }\n};\n</script>\n","import { render } from \"./RwsSetup.vue?vue&type=template&id=6775feec\"\nimport script from \"./RwsSetup.vue?vue&type=script&lang=js\"\nexport * from \"./RwsSetup.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <robo-layout-section>\n    <robo-template-rws-setup create :onRwsUpdate=\"onSave\" />\n  </robo-layout-section>\n</template>\n\n<script>\nimport { encodeAddress } from \"@polkadot/util-crypto\";\n\nexport default {\n  setup() {\n    let onSave = (rws, setStatus) => {\n      if (!rws.owner || !rws.name || !rws.controller) {\n        setStatus(\"error\", \"All fields are required\");\n        return;\n      }\n\n      try {\n        encodeAddress(rws.owner);\n      } catch (error) {\n        setStatus(\"error\", `Owner: ${error.message}`);\n        return;\n      }\n      try {\n        encodeAddress(rws.controller);\n      } catch (error) {\n        setStatus(\"error\", `Controller: ${error.message}`);\n        return;\n      }\n\n      setStatus(\"ok\");\n    };\n    return {\n      onSave\n    };\n  }\n};\n</script>\n","import { render } from \"./RwsSetupNew.vue?vue&type=template&id=ef2bf080\"\nimport script from \"./RwsSetupNew.vue?vue&type=script&lang=js\"\nexport * from \"./RwsSetupNew.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <robo-layout-section>\n    <robo-grid offset=\"x0\" gap=\"x1\" galign=\"start\" minColumnWidth=\"450px\">\n      <robo-card>\n        <robo-link router=\"/telemetry\">\n          <robo-image src=\"images/services-ha.jpg\" />\n        </robo-link>\n        <robo-text title=\"3\">\n          <robo-link router=\"/telemetry\">Home assistant</robo-link>\n        </robo-text>\n        <robo-text size=\"small\">\n          Integrate Robonomics into your Home assistant dashboard and get\n          Parachain decentralized cloud service all over the word. Manipulate\n          your smart devices bypassing corporate clouds, manage user access\n          wherever you are. Backup your smart home data in blockchain.\n        </robo-text>\n      </robo-card>\n\n      <robo-card>\n        <robo-link href=\"https://sensors.robonomics.network/#/\">\n          <robo-image src=\"images/services-sensors.jpg\" />\n        </robo-link>\n        <robo-text title=\"3\">\n          <robo-link href=\"https://sensors.robonomics.network/#/\">\n            Sensors Map\n          </robo-link>\n        </robo-text>\n        <robo-text size=\"small\">\n          The decentralized opensource sensors map offers two distinct layers of\n          decentralization at your choise: peer-to-peer connectivity for direct\n          access to sensor data, and the federative concept for accumulating\n          sensor data and displaying measurement history. Anyone can assemble\n          your own sensor using components available on the free market.\n        </robo-text>\n      </robo-card>\n\n      <robo-card>\n        <robo-link href=\"https://dapp.spot-sdk.education\">\n          <robo-image src=\"images/services-spot.jpg\" />\n        </robo-link>\n        <robo-text title=\"3\">\n          <robo-link href=\"https://dapp.spot-sdk.education\">\n            Boston Dynamics Spot SDK lessons\n          </robo-link>\n        </robo-text>\n        <robo-text size=\"small\">\n          Learn and practice with the Boston Dynamics Spot robot wherever you\n          are. After each lesson you will receive a captured video of the robot\n          movements and a printable PDF certificate.\n        </robo-text>\n      </robo-card>\n\n      <robo-card>\n        <robo-link href=\"https://telescope.merklebot.com/#/\">\n          <robo-image src=\"images/services-telescope.jpg\" />\n        </robo-link>\n        <robo-text title=\"3\">\n          <robo-link href=\"https://telescope.merklebot.com/#/\">\n            An Autonomous Telescope Minting RMRK NFT's\n          </robo-link>\n        </robo-text>\n        <robo-text size=\"small\">\n          Connect to an autonomous telescope in the dark night of the Atacama\n          desert in Chile to capture an astronomical object and mint unique NFTs\n          in a few clicks.\n        </robo-text>\n      </robo-card>\n\n      <robo-card>\n        <robo-link href=\"https://dapp.ipci.io/#/offsetting\">\n          <robo-image src=\"images/services-offsetting.jpg\" />\n        </robo-link>\n        <robo-text title=\"3\">\n          <robo-link href=\"https://dapp.ipci.io/#/offsetting\">\n            Smart Building Offsetting\n          </robo-link>\n        </robo-text>\n        <robo-text size=\"small\">\n          Carbon footprint clearance for smart buildings based on geolocation\n          and energy consumption information.\n        </robo-text>\n      </robo-card>\n    </robo-grid>\n  </robo-layout-section>\n</template>","import { render } from \"./Services.vue?vue&type=template&id=7791f1fc\"\nconst script = {}\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <Libp2p\n    v-if=\"type === 'libp2p'\"\n    :config=\"config\"\n    :isKey\n    @connected=\"handlerConnected\"\n    @error=\"handlerError\"\n  />\n  <Launch v-else :config=\"config\" :isKey />\n</template>\n\n<script>\nimport { useRobonomics } from \"@/hooks/useRobonomics\";\nimport { onUnmounted, ref, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport Launch from \"./Launch.vue\";\nimport Libp2p from \"./Libp2p.vue\";\nimport { useConfig } from \"./common\";\n\nexport default {\n  components: { Libp2p, Launch },\n  setup() {\n    const store = useStore();\n    const { isReady, accountManager } = useRobonomics();\n    const { config, load } = useConfig();\n    const isKey = ref(false);\n    const type = ref(\"libp2p\");\n\n    onUnmounted(async () => {\n      if (\n        isReady.value &&\n        isKey.value &&\n        store.state.robonomicsUIvue.polkadot.address !==\n          accountManager.account.address\n      ) {\n        const accountOld = store.state.robonomicsUIvue.polkadot.accounts.find(\n          (item) =>\n            item.address === store.state.robonomicsUIvue.polkadot.address\n        );\n        if (accountOld) {\n          await accountManager.setSender(accountOld.address, {\n            type: accountOld.type,\n            extension: store.state.robonomicsUIvue.polkadot.extensionObj\n          });\n        }\n      }\n    });\n\n    watch(\n      () => store.state.robonomicsUIvue.rws.user.key,\n      async (key) => {\n        if (key) {\n          await accountManager.addPair(key);\n          isKey.value = true;\n          load();\n        } else {\n          console.log(\"NOT KEY\");\n        }\n      },\n      { immediate: true }\n    );\n\n    return {\n      type,\n      isKey,\n      config,\n      handlerConnected: (result) => {\n        store.dispatch(\"app/setlibp2p\", {\n          connected: true\n        });\n        let relay = false;\n        if (result.protoNames().includes(\"p2p-circuit\")) {\n          relay = true;\n        }\n        store.dispatch(\"app/setrelay\", {\n          connected: relay\n        });\n      },\n      handlerError: (e) => {\n        console.log(e.message);\n        console.log(\"switch to parachain\");\n        type.value = \"parachain\";\n        store.dispatch(\"app/setlibp2p\", {\n          connected: false\n        });\n        store.dispatch(\"app/setrelay\", {\n          connected: false\n        });\n      }\n    };\n  }\n};\n</script>\n","<template>\n  <robo-template-devices-layout\n    :config=\"config\"\n    :datalog=\"data\"\n    :updateTime=\"updateTime\"\n  />\n</template>\n\n<script>\nimport { watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useData } from \"./launch\";\n\nexport default {\n  props: {\n    isKey: {\n      default: false,\n      type: Boolean\n    },\n    config: {\n      default: null,\n      type: Object\n    }\n  },\n  setup(props) {\n    const { data, updateTime, run, launch } = useData();\n    const store = useStore();\n\n    watch(\n      () => props.isKey,\n      (value) => {\n        if (value) {\n          run();\n        }\n      },\n      { immediate: true }\n    );\n\n    watch(\n      () => store.state.robonomicsUIvue.rws.launch,\n      (value) => {\n        try {\n          launch(JSON.parse(value));\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    );\n\n    return { data, updateTime };\n  }\n};\n</script>\n","import { useAccount } from \"@/hooks/useAccount\";\nimport { inject, watch } from \"vue\";\n\nexport function useIpfs() {\n  const { account } = useAccount();\n  const { instance } = inject(\"IpfsProvider\");\n\n  watch(account, async () => {\n    if (instance.value) {\n      instance.value.authClear();\n    }\n  });\n\n  return instance.value;\n}\n","import { u8aToString } from \"@polkadot/util\";\nimport { utils } from \"robonomics-interface\";\n\nconst clearJson = (string) => {\n  return string\n    .replaceAll(\"'\", '\"')\n    .replaceAll(\"\\\\\", \"\")\n    .replaceAll('\"\"', '\"')\n    .replaceAll(\"True\", \"true\")\n    .replaceAll(\"False\", \"false\")\n    .replaceAll(\"None\", '\"None\"');\n};\n\nexport const parseJson = (string) => {\n  try {\n    return JSON.parse(string);\n  } catch (error) {\n    console.log(\"error parse 1\");\n  }\n  try {\n    return JSON.parse(clearJson(string));\n  } catch (error) {\n    console.log(\"error parse 2\");\n    console.log(string);\n  }\n  return false;\n};\n\nconst getLastIndex = async (robonomics, address) => {\n  const id = await robonomics.datalog.getLastId(address);\n  return id.id;\n};\nexport const getLastDatalog = async (robonomics, controller) => {\n  console.log(\"getLastDatalog\");\n  if (!controller) {\n    return false;\n  }\n  const lastIndex = await getLastIndex(robonomics, controller);\n  if (lastIndex !== null && lastIndex >= 0) {\n    const last = await robonomics.datalog.readByIndex(controller, lastIndex);\n    return { timestamp: last[0].toNumber(), cid: u8aToString(last[1]) };\n  }\n  return false;\n};\n\n// export const getLastDatalog = async (robonomics, controller) => {\n//   console.log(\"getLastDatalog\");\n//   if (!controller) {\n//     return false;\n//   }\n//   const result = await robonomics.datalog.read(controller);\n//   if (!result.length) {\n//     return false;\n//   }\n//   const last = result[result.length - 1];\n//   return { timestamp: last[0].toNumber(), cid: u8aToString(last[1]) };\n// };\n\nexport const getConfigCid = async (robonomics, controller, twin_id) => {\n  console.log(\"getConfigCid\");\n  if (!controller || !twin_id) {\n    return false;\n  }\n  const twin = await robonomics.twin.getTwin(twin_id);\n  if (!twin) {\n    return false;\n  }\n  const configHex = Object.keys(twin).find((key) => twin[key] === controller);\n  if (!configHex) {\n    return false;\n  }\n  return utils.hexToCid(configHex);\n};\n","import { useIpfs } from \"@/hooks/useIpfs\";\nimport { useRobonomics } from \"@/hooks/useRobonomics\";\nimport { createPair, encryptor } from \"@/utils/encryptor\";\nimport { getConfigCid, getLastDatalog, parseJson } from \"@/utils/telemetry\";\nimport { hexToU8a, u8aToString } from \"@polkadot/util\";\nimport { decodeAddress } from \"@polkadot/util-crypto\";\nimport { ref, watch } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport const chainSS58 = 32;\n\nconst catFile = async (store, ipfs, cid) => {\n  if (!cid) {\n    return false;\n  }\n  try {\n    return await ipfs.catViaGateway(\n      store.state.robonomicsUIvue.ipfs.activegateway,\n      cid,\n      2\n    );\n  } catch (_) {\n    try {\n      const res = await ipfs.catViaGateways(\n        store.state.robonomicsUIvue.ipfs.gateways,\n        cid\n      );\n      store.commit(\"ipfs/setActiveGateway\", res.gateway);\n      return res.result;\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  return false;\n};\n\nexport const decryptData = async (encryptedMsg, controller, account) => {\n  if (encryptedMsg) {\n    try {\n      const controllerPublicKey = decodeAddress(controller);\n      const seed = account.decryptMessage(\n        hexToU8a(encryptedMsg[account.address]),\n        controllerPublicKey\n      );\n      const admin = encryptor(createPair(u8aToString(seed)));\n      const data = admin.decryptMessage(\n        hexToU8a(encryptedMsg.data),\n        controllerPublicKey\n      );\n      return parseJson(u8aToString(data));\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  return false;\n};\n\nexport const readFileDecrypt = async (\n  cid,\n  controller,\n  account,\n  store,\n  ipfs\n) => {\n  if (cid) {\n    const data = await catFile(store, ipfs, cid);\n    if (!data) {\n      console.log(`Error: ${cid} not found in ipfs`);\n      return null;\n    }\n    const result = await decryptData(data, controller, account);\n    if (result) {\n      return result;\n    } else {\n      console.log(`Error: decryptMsg`);\n    }\n  }\n  return null;\n};\n\nconst loadSetup = (store) => {\n  if (store.state.robonomicsUIvue.rws.active) {\n    const setupRaw = store.state.robonomicsUIvue.rws.list.find(\n      (item) => item.owner === store.state.robonomicsUIvue.rws.active\n    );\n    if (setupRaw) {\n      try {\n        return {\n          controller: setupRaw.controller,\n          owner: setupRaw.owner\n        };\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n  return false;\n};\n\nexport const useSetup = () => {\n  const controller = ref(null);\n  const owner = ref(null);\n\n  const store = useStore();\n\n  watch(\n    () => store.state.robonomicsUIvue.rws.active,\n    () => {\n      const setup = loadSetup(store);\n      if (setup) {\n        controller.value = setup.controller;\n        owner.value = setup.owner;\n      }\n    },\n    { immediate: true }\n  );\n\n  return { controller, owner };\n};\n\nexport const notify = (store, text, timeout = 3000) => {\n  store.dispatch(\"app/setStatus\", {\n    value: text,\n    timeout\n  });\n  console.log(text);\n};\n\nexport const setStatusLaunch = (store, command, status) => {\n  store.commit(\n    \"rws/setLaunch\",\n    JSON.stringify({ ...command, tx: { tx_status: status } })\n  );\n};\n\nexport const useLastDatalog = () => {\n  const cid = ref(null);\n  const updateTime = ref(null);\n  const data = ref(null);\n\n  const store = useStore();\n  const ipfs = useIpfs();\n  const { isReady, getInstance } = useRobonomics();\n  const { controller } = useSetup();\n\n  (async () => {\n    if (isReady.value && controller.value) {\n      const robonomics = getInstance();\n      const datalog = await getLastDatalog(robonomics, controller.value);\n      cid.value = datalog.cid;\n      updateTime.value = datalog.timestamp;\n      data.value = await readFileDecrypt(\n        cid.value,\n        controller.value,\n        robonomics.accountManager.encryptor(),\n        store,\n        ipfs\n      );\n    }\n  })();\n\n  return { cid, updateTime, data };\n};\n\nexport const useConfig = () => {\n  const config = ref(null);\n\n  const store = useStore();\n  const ipfs = useIpfs();\n  const { isReady, getInstance, accountManager } = useRobonomics();\n  const { controller } = useSetup();\n\n  const getConfig = async (controller) => {\n    if (!isReady.value) {\n      const data = localStorage.getItem(`haconfig:${controller}`);\n      if (data) {\n        try {\n          const parsedData = JSON.parse(data);\n          console.log(\"getConfig cache\");\n          return { data: parsedData.value, cache: true };\n        } catch (error) {\n          console.log(\"haconfig bad\", error);\n        }\n      } else {\n        return { data: null, cache: true };\n      }\n    } else {\n      const robonomics = getInstance();\n\n      const datalog = await getLastDatalog(robonomics, controller);\n      const result = await readFileDecrypt(\n        datalog.cid,\n        controller,\n        accountManager.encryptor(),\n        store,\n        ipfs\n      );\n\n      if (result) {\n        const twin_id = result.twin_id;\n        notify(store, `Twin id #${twin_id}`);\n\n        notify(store, `Start load config`);\n        const cid = await getConfigCid(robonomics, controller, twin_id);\n        if (!cid) {\n          console.log(\"Config not found\");\n          console.log(\"controller\", controller);\n          console.log(\"twin_id\", twin_id);\n        }\n\n        const config = await readFileDecrypt(\n          cid,\n          controller,\n          accountManager.encryptor(),\n          store,\n          ipfs\n        );\n\n        localStorage.setItem(\n          `haconfig:${controller}`,\n          JSON.stringify({ time: Date.now(), value: config })\n        );\n        console.log(\"getConfig chain\");\n\n        return { data: config, cache: false };\n      }\n    }\n    return { data: null, cache: false };\n  };\n\n  const load = async () => {\n    notify(store, \"Find twin id\");\n\n    if (\n      !controller.value ||\n      !accountManager.account ||\n      accountManager.account.type !== \"ed25519\"\n    ) {\n      notify(store, \"Error\");\n      return;\n    }\n\n    const result = await getConfig(controller.value);\n    config.value = result.data;\n    if (result.cache) {\n      const stop = watch(\n        isReady,\n        async () => {\n          if (isReady.value) {\n            const result = await getConfig(controller.value);\n            config.value = result.data;\n            stop();\n          }\n        },\n        { immediate: true }\n      );\n    }\n\n    if (config.value !== null) {\n      notify(store, `Config loaded`);\n    }\n  };\n\n  return { config, load };\n};\n","import { useDevices } from \"@/hooks/useDevices\";\nimport { useIpfs } from \"@/hooks/useIpfs\";\nimport { useRobonomics } from \"@/hooks/useRobonomics\";\nimport { useSend } from \"@/hooks/useSend\";\nimport { getLastDatalog } from \"@/utils/telemetry\";\nimport { stringToU8a, u8aToHex } from \"@polkadot/util\";\nimport { decodeAddress } from \"@polkadot/util-crypto\";\nimport { onUnmounted, ref, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { notify, readFileDecrypt, setStatusLaunch, useSetup } from \"./common\";\n\nexport const useData = () => {\n  const cid = ref(null);\n  const updateTime = ref(null);\n  const data = ref(null);\n\n  const store = useStore();\n  const ipfs = useIpfs();\n  const { isReady, getInstance, accountManager } = useRobonomics();\n  const transaction = useSend();\n  const devices = useDevices();\n  const { controller, owner } = useSetup();\n\n  watch(\n    () => store.state.robonomicsUIvue.rws.active,\n    () => {\n      devices.owner.value = store.state.robonomicsUIvue.rws.active;\n    },\n    { immediate: true }\n  );\n\n  let unsubscribeDatalog;\n  const watchDatalog = async () => {\n    if (!isReady.value) {\n      return;\n    }\n    unsubscribeDatalog = await getInstance().datalog.on(\n      { method: \"NewRecord\" },\n      (results) => {\n        const r = results.filter((item) => {\n          return (\n            item.success &&\n            controller.value &&\n            item.data[0].toHuman() === controller.value\n          );\n        });\n        for (const item of r) {\n          updateTime.value = item.data[1].toNumber();\n          cid.value = item.data[2].toHuman();\n        }\n      }\n    );\n  };\n\n  watch(cid, async () => {\n    data.value = await readFileDecrypt(\n      cid.value,\n      controller.value,\n      accountManager.encryptor(),\n      store,\n      ipfs\n    );\n  });\n\n  const run = async () => {\n    if (isReady.value && controller.value) {\n      const datalog = await getLastDatalog(getInstance(), controller.value);\n      cid.value = datalog.cid;\n      updateTime.value = datalog.timestamp;\n    }\n    watchDatalog();\n  };\n\n  const stop = () => {\n    if (unsubscribeDatalog) {\n      unsubscribeDatalog();\n    }\n  };\n\n  onUnmounted(() => {\n    console.log(\"unmount launch\");\n    stop();\n  });\n\n  const launch = async (command) => {\n    console.log(command.launch.params.entity_id, command.tx.tx_status);\n    if (command.tx.tx_status !== \"pending\") {\n      return;\n    }\n\n    notify(store, `Launch command`);\n    console.log(`command ${JSON.stringify(command)}`);\n\n    if (!devices.devices.value.includes(accountManager.account.address)) {\n      notify(store, `Error: You do not have access to device management.`);\n      setStatusLaunch(store, command, \"error\");\n      return;\n    }\n\n    if (!ipfs.isAuth()) {\n      notify(store, `Authorization on ipfs node`);\n      try {\n        const signature = (\n          await accountManager.account.signMsg(\n            stringToU8a(accountManager.account.address)\n          )\n        ).toString();\n        ipfs.auth(owner.value, accountManager.account.address, signature);\n      } catch (error) {\n        if (error.message === \"Cancelled\") {\n          setStatusLaunch(store, command, \"declined\");\n        } else {\n          console.log(error);\n          setStatusLaunch(store, command, \"error\");\n        }\n        return;\n      }\n      setStatusLaunch(store, command, \"approved\");\n    }\n\n    const encryptor = accountManager.encryptor();\n    const controllerPublicKey = decodeAddress(controller.value);\n\n    let commandCid;\n    try {\n      const cmdString = JSON.stringify(command.launch);\n      const cmdCrypto = encryptor.encryptMessage(\n        cmdString,\n        controllerPublicKey\n      );\n      commandCid = await ipfs.add(u8aToHex(cmdCrypto));\n    } catch (error) {\n      setStatusLaunch(store, command, \"error\");\n      notify(store, `Error: ${error.message}`);\n      return;\n    }\n    console.log(`launch ipfs file ${commandCid.path}`);\n\n    if (!isReady.value) {\n      notify(store, `Error: Robonomics is not ready.`);\n      setStatusLaunch(store, command, \"error\");\n      return;\n    }\n\n    notify(store, `Send launch`);\n    const call = getInstance().launch.send(controller.value, commandCid.path);\n    const tx = transaction.createTx();\n    await transaction.send(tx, call, owner.value);\n    if (tx.error.value) {\n      if (tx.error.value !== \"Cancelled\") {\n        setStatusLaunch(store, command, \"error\");\n        notify(store, `Error: ${tx.error.value}`);\n      } else {\n        setStatusLaunch(store, command, \"declined\");\n        notify(store, \"Calcel\");\n      }\n    } else {\n      console.log(command);\n      setStatusLaunch(store, command, \"success\");\n      notify(store, \"Launch sended\");\n    }\n  };\n\n  return { cid, updateTime, data, run, stop, launch };\n};\n","import { render } from \"./Launch.vue?vue&type=template&id=497be6f4\"\nimport script from \"./Launch.vue?vue&type=script&lang=js\"\nexport * from \"./Launch.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <robo-template-devices-layout\n    :config=\"config\"\n    :datalog=\"data\"\n    :updateTime=\"updateTime\"\n  />\n</template>\n\n<script>\nimport { watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useData } from \"./libp2p\";\n\nexport default {\n  props: {\n    isKey: {\n      default: false,\n      type: Boolean\n    },\n    config: {\n      default: null,\n      type: Object\n    }\n  },\n  emits: [\"connected\", \"error\"],\n  setup(props, { emit }) {\n    const { data, updateTime, run, launch } = useData();\n    const store = useStore();\n\n    const isOnce = props.isKey && props.config !== null;\n    const stop = watch(\n      () => [props.isKey, props.config],\n      ([isKey, config]) => {\n        if (isKey && config !== null) {\n          if (!isOnce && typeof stop === \"function\") {\n            stop();\n          }\n          if (config.peer_id) {\n            (async () => {\n              const result = await run(\n                config.peer_id,\n                config.libp2p_multiaddress\n              );\n              if (result) {\n                emit(\"connected\", result);\n                if (!result.protoNames().includes(\"p2p-circuit\")) {\n                  const gateway = `http://${\n                    result.nodeAddress().address\n                  }:8080/ipfs/`;\n                  if (\n                    store.state.robonomicsUIvue.ipfs.activegateway !== gateway\n                  ) {\n                    console.log(\"set local gateway\", gateway);\n                    store.commit(\"ipfs/setActiveGateway\", gateway);\n                  }\n                } else {\n                  console.log(\"relay\");\n                }\n              } else {\n                emit(\"error\", new Error(\"connect\"));\n              }\n            })();\n          } else {\n            emit(\"error\", new Error(\"not found peer_id\"));\n          }\n        }\n      },\n      { immediate: true, once: isOnce }\n    );\n\n    watch(\n      () => store.state.robonomicsUIvue.rws.launch,\n      (value) => {\n        try {\n          launch(JSON.parse(value));\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    );\n\n    return { data, updateTime };\n  }\n};\n</script>\n","import { pipe } from \"it-pipe\";\nimport { fromString as uint8ArrayFromString } from \"uint8arrays/from-string\";\nimport { toString as uint8ArrayToString } from \"uint8arrays/to-string\";\n\nexport function createHa() {\n  return (components) => {\n    async function getRequest(stream) {\n      return pipe(stream, async function (source) {\n        let result = \"\";\n        for await (const data of source) {\n          result += uint8ArrayToString(data.subarray());\n        }\n        return JSON.parse(result);\n      });\n    }\n\n    async function sendResponse(stream, msg) {\n      return pipe(\n        [uint8ArrayFromString(JSON.stringify(msg))],\n        stream.sink\n      ).finally(() => {\n        stream.close();\n      });\n    }\n\n    return {\n      async handle(\n        protocol,\n        handler,\n        options = {\n          runOnTransientConnection: true\n        }\n      ) {\n        await components.registrar.handle(\n          protocol,\n          async ({ stream }) => {\n            handler(await getRequest(stream), stream);\n          },\n          options\n        );\n      },\n      async request(\n        connection,\n        protocol,\n        data,\n        options = {\n          runOnTransientConnection: true\n        }\n      ) {\n        if (connection.status !== \"open\") {\n          return;\n        }\n        const stream = await connection.newStream([protocol], options);\n        return pipe(\n          [uint8ArrayFromString(JSON.stringify(data))],\n          stream,\n          async function (source) {\n            let result = \"\";\n            for await (const data of source) {\n              result += uint8ArrayToString(data.subarray());\n            }\n            try {\n              // stream.close();\n              return JSON.parse(result);\n            } catch (error) {\n              return result;\n            }\n          }\n        );\n      },\n      utils: {\n        getRequest,\n        sendResponse\n      }\n    };\n  };\n}\n","import { noise } from \"@chainsafe/libp2p-noise\";\nimport { circuitRelayTransport } from \"@libp2p/circuit-relay-v2\";\nimport { identify } from \"@libp2p/identify\";\n// import { keychain } from \"@libp2p/keychain\";\n// import { defaultLogger } from \"@libp2p/logger\";\nimport { mplex } from \"@libp2p/mplex\";\nimport { webRTC } from \"@libp2p/webrtc\";\nimport { webSockets } from \"@libp2p/websockets\";\nimport * as filters from \"@libp2p/websockets/filters\";\nimport { multiaddr } from \"@multiformats/multiaddr\";\n// import { LevelDatastore } from \"datastore-level\";\n// import { Key } from \"interface-datastore\";\nimport { createLibp2p } from \"libp2p\";\nimport { createHa } from \"./ha\";\n\nexport async function createNode() {\n  // const selfKey = new Key(\"/pkcs8/self\");\n  // const datastore = new LevelDatastore(`libp2p/data`);\n  // const chain = keychain()({\n  //   datastore: datastore,\n  //   logger: defaultLogger()\n  // });\n  // let peerId;\n  // if (await datastore.has(selfKey)) {\n  //   peerId = await chain.exportPeerId(\"self\");\n  // }\n  const node = await createLibp2p({\n    // peerId: peerId,\n    addresses: {\n      listen: [\"/webrtc\"]\n    },\n    transports: [\n      webSockets({\n        filter: filters.all\n      }),\n      webRTC(),\n      circuitRelayTransport()\n    ],\n    streamMuxers: [mplex()],\n    connectionEncryption: [noise()],\n    services: {\n      identify: identify(),\n      ha: createHa()\n    },\n    connectionGater: {\n      denyDialMultiaddr: () => {\n        return false;\n      }\n    },\n    connectionManager: {\n      minConnections: 0\n    }\n  });\n  // if (chain != null && !(await datastore.has(selfKey))) {\n  //   await chain.importPeer(\"self\", node.peerId);\n  // }\n  return node;\n}\nexport function defaultRelay(peer_id) {\n  return multiaddr(\n    `/dns4/libp2p-relay-1.robonomics.network/tcp/443/wss/p2p/12D3KooWEMFXXvpZUjAuj1eKR11HuzZTCQ5HmYG9MNPtsnqPSERD/p2p-circuit/p2p/${peer_id}`\n  );\n}\nexport async function connectMultiaddress(peer_id, peer_multiaddress) {\n  if (peer_multiaddress.length > 0) {\n    const localMultiaddrs = [];\n    const circuit = [];\n    for (const peer_multiaddr of peer_multiaddress) {\n      const localMultiaddr = multiaddr(peer_multiaddr);\n      const protos = localMultiaddr.protoNames();\n      if (protos.includes(\"ws\") || protos.includes(\"wss\")) {\n        if (protos.includes(\"p2p-circuit\")) {\n          circuit.push(localMultiaddr);\n        } else if (\n          window.location.protocol !== \"https:\" ||\n          protos.includes(\"wss\")\n        ) {\n          localMultiaddrs.push(localMultiaddr);\n        }\n      }\n    }\n\n    if (localMultiaddrs.length > 0) {\n      for (const addr of localMultiaddrs) {\n        try {\n          await connect(addr);\n          return addr;\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n\n    if (circuit.length > 0) {\n      for (const addr of circuit) {\n        try {\n          await connect(addr);\n          return addr;\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n  }\n  try {\n    const addr = defaultRelay(peer_id);\n    await connect(addr);\n    return addr;\n  } catch (error) {\n    console.log(error);\n  }\n  return false;\n}\n\nlet node = null;\nlet connections = [];\nlet connection = null;\n\nexport async function start() {\n  if (node) {\n    return node;\n  }\n  node = await createNode();\n  await node.start();\n  console.log(`Node started with id ${node.peerId.toString()}`);\n\n  function updateConnectionsList() {\n    connections = node.getConnections().map((item) => {\n      return item.remoteAddr.toString();\n    });\n    console.log(\"Update Connections List\", connections);\n  }\n\n  node.addEventListener(\"connection:open\", (event) => {\n    console.log(\"connected\", event.detail.remoteAddr.toString());\n    updateConnectionsList();\n  });\n\n  node.addEventListener(\"connection:close\", (event) => {\n    console.log(\"disconected\", event.detail.remoteAddr.toString());\n    updateConnectionsList();\n    setTimeout(() => {\n      if (\n        connection &&\n        event.detail.remoteAddr.toString() === connection.remoteAddr.toString()\n      ) {\n        console.log(\"reconnect\");\n        reconnect(connection.remoteAddr.toString());\n      }\n    }, 10000);\n  });\n\n  return node;\n}\n\nexport async function reconnect(addr) {\n  try {\n    await connect(addr);\n  } catch (error) {\n    console.log(error);\n    // setTimeout(async () => {\n    //   if (addr && !connections.includes(addr)) {\n    //     await reconnect(addr);\n    //   }\n    // }, 3000);\n  }\n}\nexport async function connect(addr) {\n  console.log(\"connect to\", addr.toString());\n  if (!connections.includes(addr)) {\n    const listenerMultiaddr = multiaddr(addr);\n    connection = await node.dial(listenerMultiaddr);\n  }\n  return addr;\n}\n\nexport async function disconnect() {\n  if (connection) {\n    await connection.close();\n  }\n  connection = null;\n}\n\nexport function request(data, protocol = \"/call\") {\n  if (node && connection) {\n    return node.services.ha.request(connection, protocol, data);\n  }\n  throw new Error(\"error\");\n}\n","import { useDevices } from \"@/hooks/useDevices\";\nimport { useRobonomics } from \"@/hooks/useRobonomics\";\nimport {\n  connectMultiaddress,\n  disconnect,\n  request,\n  start\n} from \"@/utils/libp2p/libp2p\";\nimport { u8aToHex } from \"@polkadot/util\";\nimport { decodeAddress } from \"@polkadot/util-crypto\";\nimport { onUnmounted, ref, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { decryptData, notify, setStatusLaunch, useSetup } from \"./common\";\n\nexport const useData = () => {\n  const data = ref(null);\n  const updateTime = ref(null);\n\n  const store = useStore();\n  const { accountManager } = useRobonomics();\n  const devices = useDevices();\n  const { controller } = useSetup();\n\n  watch(\n    () => store.state.robonomicsUIvue.rws.active,\n    () => {\n      devices.owner.value = store.state.robonomicsUIvue.rws.active;\n    },\n    { immediate: true }\n  );\n\n  onUnmounted(() => {\n    disconnect();\n  });\n\n  const run = async (peer_id, peer_multiaddress) => {\n    const node = await start();\n    try {\n      notify(store, `Connect to peer id ${peer_id}`);\n      const connected = await connectMultiaddress(peer_id, peer_multiaddress);\n      if (connected) {\n        notify(store, `Connected`);\n        const protocols = node.getProtocols();\n        if (protocols.includes(\"/update\")) {\n          await node.unhandle(\"/update\");\n        }\n        node.services.ha.handle(\"/update\", async (dataRaw, stream) => {\n          const result = await decryptData(\n            dataRaw.data,\n            controller.value,\n            accountManager.encryptor()\n          );\n          if (result) {\n            data.value = result;\n            updateTime.value = Date.now();\n            await node.services.ha.utils.sendResponse(stream, {\n              result: true\n            });\n          } else {\n            notify(store, `Error: decryptMsg`);\n          }\n        });\n        return connected;\n      }\n    } catch (error) {\n      notify(store, `Error: ${error.message}`);\n      console.log(error);\n    }\n    return false;\n  };\n\n  const launch = async (command) => {\n    console.log(command.launch.params.entity_id, command.tx.tx_status);\n    if (command.tx.tx_status !== \"pending\") {\n      return;\n    }\n\n    notify(store, `Launch command`);\n\n    if (!devices.devices.value.includes(accountManager.account.address)) {\n      notify(store, `Error: You do not have access to device management.`);\n      setStatusLaunch(store, command, \"error\");\n      return;\n    }\n\n    try {\n      const encryptor = accountManager.encryptor();\n      const controllerPublicKey = decodeAddress(controller.value);\n      const cmdString = JSON.stringify(command.launch);\n      const cmdCrypto = encryptor.encryptMessage(\n        cmdString,\n        controllerPublicKey\n      );\n      const response = await request({\n        data: {\n          sender: accountManager.account.address,\n          data: u8aToHex(cmdCrypto)\n        }\n      });\n      console.log(`response:`, response);\n\n      setStatusLaunch(store, command, \"success\");\n    } catch (error) {\n      console.log(error);\n      notify(store, `Error: Check status of the HomeAssistant.`);\n      setStatusLaunch(store, command, \"error\");\n    }\n  };\n\n  return { data, updateTime, run, launch };\n};\n","import { render } from \"./Libp2p.vue?vue&type=template&id=a62a6dd6\"\nimport script from \"./Libp2p.vue?vue&type=script&lang=js\"\nexport * from \"./Libp2p.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Telemetry.vue?vue&type=template&id=8a32c950\"\nimport script from \"./Telemetry.vue?vue&type=script&lang=js\"\nexport * from \"./Telemetry.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from \"vue-router\";\nimport Home from \"./views/Home.vue\";\nimport PathNotFound from \"./views/PathNotFound.vue\";\nimport RwsActivate from \"./views/RwsActivate.vue\";\nimport RwsSetup from \"./views/RwsSetup.vue\";\nimport RwsSetupNew from \"./views/RwsSetupNew.vue\";\nimport Services from \"./views/Services.vue\";\nimport Telemetry from \"./views/telemetry/Telemetry.vue\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Home\",\n    component: Home,\n    meta: {\n      title: \"Dashboard\"\n    }\n  },\n  {\n    path: \"/rws-buy\",\n    name: \"rwsActivate\",\n    component: RwsActivate,\n    meta: {\n      title: \"Buy a Subscription\"\n    }\n  },\n  {\n    path: \"/rws-setup\",\n    name: \"rwsSetup\",\n    component: RwsSetup,\n    meta: {\n      title: \"Setup a Subscription\"\n    }\n  },\n  {\n    path: \"/rws-setup-new\",\n    name: \"rwsSetupNew\",\n    component: RwsSetupNew,\n    meta: {\n      title: \"New Subscription setup\"\n    }\n  },\n  {\n    path: \"/telemetry\",\n    name: \"telemetry\",\n    component: Telemetry,\n    meta: {\n      title: \"Devices control panel\"\n    }\n  },\n  {\n    path: \"/services\",\n    name: \"services\",\n    component: Services,\n    meta: {\n      title: \"Services\"\n    }\n  },\n  { path: \"/:pathMatch(.*)*\", component: PathNotFound }\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\n\nexport default router;\n","import { createStore } from \"vuex\";\n\nconst store = createStore({\n  state: {\n    name: \"Vue\"\n  }\n});\n\nexport default store;\n","import { fromUnit } from \"./tools\";\nexport default {\n  install: (app) => {\n    app.config.globalProperties.$filters = {\n      balance(value, decimals, symbol) {\n        if (typeof value === \"string\" || typeof value === \"number\") {\n          return `${fromUnit(value, decimals, 4)} ${symbol}`;\n        }\n        return \"\";\n      }\n    };\n  }\n};\n","import { Buffer } from \"buffer\";\nimport { robonomicsUI } from \"robonomics-ui-vue\";\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport ipfs from \"./plugins/ipfs\";\nimport robonomics from \"./plugins/robonomics\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport filters from \"./utils/filters\";\nimport { showVersion } from \"./utils/tools\";\n\nimport \"robonomics-ui-vue/style.css\";\n\nwindow.Buffer = Buffer;\n\nshowVersion();\n\nconst app = createApp(App);\n\napp\n  .use(router)\n  .use(store)\n  .use(filters)\n  .use(robonomics, {\n    // endpoint: \"ws://127.0.0.1:9944\"\n    endpoint: \"wss://kusama.rpc.robonomics.network/\"\n  })\n  .use(ipfs, {\n    api: { gateway: \"https://ipfs.url.today\" },\n    gateways: [\n      \"https://ipfs.url.today/ipfs/\",\n      \"https://cf-ipfs.com/ipfs/\",\n      \"https://ipfs.io/ipfs/\",\n      \"https://gateway.pinata.cloud/ipfs/\",\n      \"https://gateway.ipfs.io/ipfs/\",\n      \"https://aira.mypinata.cloud/ipfs/\"\n    ]\n  })\n  .use(robonomicsUI, { store })\n  .mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdapp_robonomics_network\"] = self[\"webpackChunkdapp_robonomics_network\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(65038); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_main_layout","pagetitle","$setup","title","_createVNode","_component_router_view","_component_robo_layout","_component_dapp_header","$props","_renderSlot","_ctx","$slots","$data","renderComponent","_component_robo_layout_header","logoIcon","navigation","version","toDecimal","v","Decimal","toString","round","place","todp","fromUnit","decimals","dp","div","pow","showVersion","console","log","process","toExpNeg","toExpPos","props","type","String","default","inject","data","links","link","computed","robonomics","toRaw","this","RobonomicsProvider","instance","value","watch","signer","signRaw","$store","state","robonomicsUIvue","polkadot","address","handlerAccount","handler","extensionObj","immediate","newValue","oldValue","$route","async","$nextTick","created","res","axios","get","tag_name","_","methods","isReady","unsubscribeBalance","account","accounts","find","item","name","accountManager","setSender","extension","getBalance","r","transferable","free","sub","frozen","commit","api","registry","chainDecimals","__exports__","useRobonomics","provider","getInstance","useDevices","initialOwner","owner","ref","devices","getDevices","result","rws","list","map","toHuman","localStorage","setItem","JSON","stringify","time","Date","now","cache","error","getItem","parsedData","parse","loadDevices","validateAddress","stop","unsubscribe","events","on","section","method","event","onUnmounted","getRegistry","TypeRegistry","types","PalletRobonomicsRwsSubscription","_enum","Lifetime","tps","Daily","days","PalletRobonomicsRwsSubscriptionLedger","freeWeight","issueTime","lastUpdate","kind","register","useSubscription","dataRaw","shallowRef","getReferenceCallWeight","consts","referenceCallWeight","getLedger","isEmpty","toJSON","undefined","createType","DAYS_TO_MS","getFreeWeightCalc","ledger","toNumber","utps","isLifetime","duration_ms","delta","Math","floor","validUntil","issue_time","isDaily","countMonth","isActive","hasSubscription","loadLedger","components","DappHeader","setup","store","useStore","subscription","active","MainLayout","IpfsProvider","router","useRouter","route","useRoute","dispatch","resolve","path","gateways","meta","resulttitle","document","querySelector","setAttribute","connected","render","IpfsApiClient","constructor","endpoint","authHeader","_create","client","create","_options","url","headers","authorization","isAuth","auth","signature","authHeaderRaw","Buffer","from","authClear","ls","cid","files","file","push","cat","decoder","TextDecoder","content","chunk","decode","stream","add","catViaGateway","gateway","attempts","index","Error","catViaGateways","message","install","app","params","provide","naclOpen","sealed","nonce","senderBoxPublic","receiverBoxSecret","nacl","open","naclSeal","senderBoxSecret","receiverBoxPublic","randomAsU8a","convertSecretKeyToCurve25519","secretKey","ed2curve","convertPublicKeyToCurve25519","publicKey","decryptMessage","encryptedMessageWithNonce","senderPublicKey","messageU8a","u8aToU8a","slice","length","encryptMessage","recipientPublicKey","nonceIn","u8aConcat","createPair","mnemonic","seed","mnemonicToMiniSecret","pair","ed25519PairFromSeed","encryptor","encodeAddress","ss58Format","AccountManagerDapp","AccountManager","keyring","config","super","loadAll","setReady","beforeSetSender","getPair","loadInjected","afterSetSender","isInjected","setSigner","signMsg","u8aToHex","u8aWrapBytes","addUri","suri","addFromUri","addUriPassword","password","addJsonPassword","json","createFromJson","addPair","pairKey","addFromPair","toJson","decoded","decodePair","base64Decode","encoded","encoding","Robonomics","createInstance","setAccountManager","_createElementVNode","_component_robo_layout_section","width","_component_robo_grid","offset","minColumnWidth","_component_robo_section","_component_robo_card","rwsactive","_component_robo_template_rws_active","key","_createElementBlock","_Fragment","_component_robo_text","align","size","weight","gap","columns","_component_robo_grid_item","borderbottom","_toDisplayString","price","_component_robo_details","summary","_withCtx","_component_robo_icon","icon","_component_robo_link","href","_hoisted_1","freeAuctions","_component_robo_button","linkActivate","id","_hoisted_2","_hoisted_3","_hoisted_4","unsubscribeBlock","activate","getAuctionQueue","onBlock","minimalBid","getMinimalBid","bnToBn","priceFormat","window","location","_component_robo_template_rws_buy","activationtime","available","chainInfoUploaded","chainInfoStatus","rwsExpiration","expiredate","onOnActivate","onActivate","useAccount","onChange","useBalance","balance","useSend","getCallWeight","tx","paymentInfo","checkWeight","freeWeightCalc","callWeight","createTx","send","call","rpc","system","accountNextIndex","signAndSend","block","e","unsubscribeAccount","transaction","setStatus","lt","bid","Number","getFirtsFreeAuction","includes","utility","batch","setDevices","stopWatchEffect","watchEffect","_component_robo_template_rws_setup","onRwsUpdate","rwsUpdateActions","onUserDelete","removeUser","onUserAdd","addUser","onSaveHapass","saveHapass","setupOwner","controller","user","filter","passToSave","userAddress","encodedDevices","passwordForAdmin","decodeAddress","passwordForRecovery","datalog","write","ha","admin","accountOld","onSave","galign","_component_robo_image","src","script","_component_Libp2p","isKey","onConnected","handlerConnected","onError","handlerError","_component_Launch","_component_robo_template_devices_layout","updateTime","useIpfs","clearJson","string","replaceAll","parseJson","getLastIndex","getLastId","getLastDatalog","lastIndex","last","readByIndex","timestamp","u8aToString","getConfigCid","twin_id","twin","getTwin","configHex","Object","keys","utils","catFile","ipfs","activegateway","decryptData","encryptedMsg","controllerPublicKey","hexToU8a","readFileDecrypt","loadSetup","setupRaw","useSetup","notify","text","timeout","setStatusLaunch","command","status","tx_status","useConfig","getConfig","load","useData","unsubscribeDatalog","watchDatalog","results","success","run","launch","entity_id","stringToU8a","commandCid","cmdString","cmdCrypto","Boolean","createHa","getRequest","pipe","source","uint8ArrayToString","subarray","sendResponse","msg","uint8ArrayFromString","sink","finally","close","handle","protocol","options","runOnTransientConnection","registrar","request","connection","newStream","createNode","node","createLibp2p","addresses","listen","transports","webSockets","filters","webRTC","circuitRelayTransport","streamMuxers","mplex","connectionEncryption","noise","services","identify","connectionGater","denyDialMultiaddr","connectionManager","minConnections","defaultRelay","peer_id","multiaddr","connectMultiaddress","peer_multiaddress","localMultiaddrs","circuit","peer_multiaddr","localMultiaddr","protos","protoNames","addr","connect","connections","start","updateConnectionsList","getConnections","remoteAddr","peerId","addEventListener","detail","setTimeout","reconnect","listenerMultiaddr","dial","disconnect","protocols","getProtocols","unhandle","response","sender","emits","emit","isOnce","libp2p_multiaddress","nodeAddress","once","Libp2p","Launch","relay","routes","component","Home","RwsActivate","RwsSetup","RwsSetupNew","Telemetry","Services","PathNotFound","createRouter","history","createWebHashHistory","createStore","globalProperties","$filters","symbol","createApp","App","use","robonomicsUI","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","m","amdO","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","n","getter","__esModule","d","a","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","t","mode","then","ns","def","current","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}